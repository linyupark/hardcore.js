@import "normalize"
@import "fontello"
@import "animation"

@import "gridle/settings"
@import "gridle/gridle"
@import "globals/color"
@import "globals/font"


// 项目变量
$tablet-max-width: 1400px
$tablet-min-width: 481px
$mobile-max-width: 480px
$mobile-min-width: 320px
$border-radius: 5px
$gutter-width: 15px

+gridle_setup((context: 14, gutter-width: 0, gutter-left: 0, gutter-right: 0))
+gridle_register_state(mobile, (min-width: $mobile-min-width, max-width: $mobile-max-width))
+gridle_register_state(tablet, (min-width: $tablet-min-width, max-width: $tablet-max-width))
+gridle_init()

// global
a
  text-decoration: none
  color: getColor(text, link)
body
  font-size: $font-s
  font-family: $font-primary
  color: getColor(text, primary)
  &.user, &.admin
    background: getColor(background, light)
button
  cursor: pointer
  border: none
  border-radius: $border-radius
:focus
  outline: none

// mixin
=focus-border($radius: $border-radius)
  border-radius: $radius
  box-shadow: 0 0 0 1px rgba(getColor(base, primary), .6) inset
=hover-bg($color)
  background-color: darken($color, 5%)
=hover-text($color)
  color: darken($color, 5%)
=focus-bg($color)
  background-color: lighten($color, 5%)
=focus-text($color)
  color: lighten($color, 5%)
=button($bgcolor: getColor(base, primary), $fcolor: getColor(text, primary-invert))
  background: $bgcolor
  color: $fcolor
  &:hover
    +hover-bg($bgcolor)
  &[disabled]
    background: rgba($bgcolor, .3)
=input-text-primary($height: 34px, $padding: 5px 0 5px 10px)
  height: $height
  padding: $padding
  border-radius: $border-radius
  border: 1px solid getColor(border, input)
  &:focus
    background-color: getColor(background, focus)
    +focus-border()
=css-arrow($pos: 'top', $size: 5px, $color: #fff)
  &:after
    border: solid transparent
    content: " "
    height: 0
    width: 0
    position: absolute
    pointer-events: none
    border-width: $size
    @if $pos == 'top'
      bottom: 100%
      left: 50%
      margin-left: -$size
      border-bottom-color: $color
    @if $pos == 'bottom'
      top: 100%
      left: 50%
      margin-left: -$size
      border-top-color: $color
    @if $pos == 'left'
      top: 50%
      right: 100%
      margin-top: -$size
      border-right-color: $color
    @if $pos == 'right'
      top: 50%
      left: 100%
      margin-top: -$size
      border-left-color: $color


.wrapper
  +gridle(row)
  min-width: $mobile-min-width
  max-width: $tablet-max-width
  margin: 0 auto

header
  // 顶部提示
  .top-message
    font-size: $font-xs
    text-align: center
    position: fixed
    top: 0
    left: 50%
    padding: 8px 0
    background: rgba(getColor(background, body), .8)
    border-bottom-left-radius: $border-radius
    border-bottom-right-radius: $border-radius
    box-shadow: 0 0 5px getColor(base, lines)
    width: 30%
    margin-left: -15%
    z-index: 33
    color: getColor(state, error)
    +gridle_state(mobile)
      width: 80%
      margin-left: -40%
    &.active
      animation: fadeInDown .5s
  // 登录页的header
  &.login
    background: getColor(background, body)
  .login-header
    +gridle(13 push 0.5)
  // 管理页的heander
  &.admin, &.user
    background: getColor(base, primary)
  .admin-header
    +gridle(row)
    height: 60px
    h1
      +gridle(11 push 0.5)
      height: 60px
      line-height: 60px
      color: getColor(text, primary-invert)
  h1
    +gridle_state(mobile)
      font-size: $font-m
    font-size: $font-l
    margin: 0
    text-indent: 65px
    height: 90px
    line-height: 90px
    background-image: url(../img/fp/header-logo.jpg)
    background-position: left center
    background-repeat: no-repeat
    background-size: 50px 50px
    color: getColor(gray, base)
  userinfo
    +gridle(1.5 pull 0.5 float right)
    // 用户信息
    .username
      min-width: 100px
      position: relative
      a
        margin-top: 10px
        height: 40px
        line-height: 40px
        text-align: center
        display: block
        font-size: $font-m
        color: getColor(text, primary-invert)
        &.active
          border-radius: $border-radius
          box-shadow: 0 1px 2px darken(getColor(base, primary), 15%) inset
          +hover-bg(getColor(base, primary))
      .menu
        display: none
        width: 100%
        position: absolute
        top: 30px
        text-align: center
        border-radius: $border-radius
        box-shadow: 0 1px 3px getColor(gray, lighter)
        background: getColor(background, body)
        animation: fadeInDown .3s
        z-index: 1
        &.active
          display: block
        +css-arrow('top')
        dd
          margin: 0
          border-bottom: 1px solid getColor(base, lines)
          &:last-child
            border: none
          a
            margin: 0
            width: 100%
            font-size: $font-s
            color: getColor(text, primary)
            &:hover
              background: none
              box-shadow: none
              color: getColor(text, link)

footer
  .info
    +gridle(12 push 1)
    line-height: 150%
    font-size: $font-xs
    color: getColor(text, secondary)
  &.admin
    background: getColor(background, light)
    .info
      +gridle(14 push 0)
      padding: 33px 0
      text-align: center
      border-top: 1px solid getColor(border, input)

.body
  overflow: hidden
  background: getColor(background, body)

// 登录页
.body.fp-login
  box-shadow: 0 2px 4px darken(getColor(base, lines), 10%) inset
  background: #F2EDEF
// 管理页
.body.admin
  box-shadow: 0 2px 4px darken(getColor(base, lines), 10%) inset
  background: getColor(background, light)
  min-height: 700px
  side-nav
    +gridle(2)
  section
    +gridle(11.5 push 0.5)
    h2
      font-size: $font-l
      margin: 25px 0
    .pagination
      margin: 20px 0
      float: right
      clear: both


// classes
.animation-shake
  animation: shake .3s
.login-from
  +gridle(3.5 pull 1.4 float right)
  max-width: 350px
  min-width: 350px
  height: 320px
  border-radius: $border-radius
  box-shadow: 0 0 5px getColor(base, lines)
  background: getColor(background, body)
  margin: 140px 0
  +gridle_state(mobile)
    +gridle(14 pull 0 grid-centered)
    margin: 80px 0
  input
    margin: 10px 0 0 25px
    width: 290px
    +input-text-primary()
  .pwd-show, .pwd-hide
    width: 25px
    height: 25px
    position: absolute
    right: 35px
    top: 20px
    background-size: 25px 25px
    background-image: url(../img/fp/icon-close-eye.png)
    background-repeat: no-repeat
    background-position: center
  .pwd-show
    background-image: url(../img/fp/icon-eye.png)
  .msg-space
    font-size: $font-xs
    height: 1px
    text-align: center
  .btn-line
    button
      +button()
      margin: 10px 0 0 25px
      width: 300px
      height: 44px
      line-height: 44px
    a
      color: getColor(text, link)
      font-size: $font-xs
      display: inline-block
      margin: 15px 0 0 270px
      &:hover
        +hover-text(getColor(text, link))
  .tab-line
    height: 50px
    margin: 0
    a
      float: left
      display: block
      width: 50%
      height: 48px
      line-height: 48px
      font-size: $font-m
      text-align: center
      color: getColor(text, secondary)
      border-bottom: 2px solid getColor(background, light)
      &.active
        color: getColor(text, primary)
        border-color: getColor(base, primary)

.icon-btn
  cursor: pointer
  height: 40px
  width: 30px
  display: inline-block
  line-height: 40px
  color: getColor(text, secondary)
  &:hover
    color: getColor(text, primary)

table.base
  border-spacing: 0
  width: 100%
  box-shadow: 0 2px 2px getColor(border, table)
  background: getColor(background, body)
  border-bottom-left-radius: $border-radius
  border-bottom-right-radius: $border-radius
  thead
    background: getColor(background, light)
    th
      height: 40px
  tbody
    tr
      &:nth-child(even)
        background: #F5F7F8
    td
      text-align: center
      height: 40px
      border-right: 1px solid getColor(border, table)
      &.left
        text-align: left
        text-indent: 15px

.primary-btn
  +button()
.gray-btn
  +button(getColor(border, input), getColor(gray, base))

.pagination
  list-style: none
  height: 30px
  li
    display: inline-block
    height: 30px
    width: 30px
    float: left
    margin-right: 10px
    text-align: center
    line-height: 30px
    &.select
      width: auto
      select
        height: 30px
        border: none
        border-radius: $border-radius
        box-shadow: 1px 1px 2px getColor(border, table)
    &.active
      a
        color: getColor(base, primary)
        border: 1px solid getColor(base, primary)
    a
      height: 30px
      width: 30px
      display: block
      text-align: center
      line-height: 30px
      color: getColor(gray, base)
      border: 1px solid #fff
      border-radius: $border-radius
      box-shadow: 1px 1px 2px getColor(border, table)
      background: getColor(background, body)
      &:hover
        color: getColor(base, primary)



// component
table-filter
  display: block
  background: getColor(background, body)
  padding: 8px 15px
  border-top-left-radius: $border-radius
  border-top-right-radius: $border-radius
  box-shadow: 0 -2px 2px getColor(border, table)
  input[type=text], select
    text-indent: 10px
    margin-right: 10px
    height: 30px
    border: 1px solid getColor(border, input)
    border-radius: $border-radius
  select
    height: 34px
    text-indent: 0
  button
    height: 34px
    margin-left: -20px

header-nav
  ul
    padding: 0
    margin: 0
    height: 40px
    line-height: 40px
    li
      display: inline-block
      margin: 0 15px
      position: relative
      .sub
        background: #fff
        position: absolute
        border: 1px solid #ccc
        left: 0
        width: 100px
        height: auto
        li
          display: block

input-valid
  span
    color: getColor(state, error)
