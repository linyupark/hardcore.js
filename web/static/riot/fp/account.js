riot.tag2("fp-account",'<header for="{role}"></header><main class="{role}"><div class="container center" style="min-height: 350px"><form class="account"><h4>帐号设置</h4><br><div class="row"><p><label>帐号名称</label><input type="text" style="border: none" ref="username" riot-value="{username}" disabled></p><hr><p><label class="center">密码</label><input type="password" ref="password" placeholder="长度6-20、不能全为数字"><input-valid ref="validOnSave" for="password" reg="(?!\\d+$).\\{6,20\\}" msg="长度6-20、不能全为数字"></input-valid></p><hr><p><label>确认新密码</label><input type="password" ref="confirm_password"><input-valid ref="validCFPassword" for="confirm_password" rule="required" msg=""></input-valid></p></div><br><div class="c1 btn-line" style="text-indent: 85px"><button type="button" onclick="{fn.save}" class="btn-yellow">{app.lang.admin.btn.save}</button><button type="button" onclick="{fn.cancel}" class="btn-gray">{app.lang.admin.btn.back}</button></div></form></div></main><footer class="{role}"></footer>',"","",function(e){var t=this;t.role=t.app.utils.cookie.get("role"),t.username=t.app.utils.cookie.get("user_name"),t.fn={cancel:function(e){history.back()},save:function(e){var n="user"==t.role?"frontend/default/user-edit":"backend/default/user-edit";t.refs.validOnSave.on("valid",function(){return t.refs.confirm_password.value!=t.refs.password.value?t.refs.validCFPassword.emit("check").emit("msg","确认密码与密码不一致"):void t.app.api("POST",n,{trigger:e.target,data:{username:t.username,password:t.refs.password.value}}).on("done",function(e){t.app.alert("帐号密码修改成功","success")})}).emit("check")}},t.on("mount",function(){})});