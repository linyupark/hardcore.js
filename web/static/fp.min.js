function _defaults(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var i=n[r],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}return t}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):_defaults(t,e))}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_slicedToArray=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(this,function(){"use strict";function t(t){return ae.test(t)}function e(t){return ue.test(t)}function n(t){return("undefined"==typeof t?"undefined":_typeof(t))===Yt||!1}function r(t){return t&&("undefined"==typeof t?"undefined":_typeof(t))===Qt}function i(t){return("undefined"==typeof t?"undefined":_typeof(t))===Xt}function o(t){return("undefined"==typeof t?"undefined":_typeof(t))===Zt}function a(t){return i(t)||null===t||""===t}function s(t){return Array.isArray(t)||t instanceof Array}function u(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return i(t[e])||n&&n.writable}function c(t){return oe.test(t)}function l(t,e){return(e||document).querySelectorAll(t)}function f(t,e){return(e||document).querySelector(t)}function d(){return document.createDocumentFragment()}function p(){return document.createTextNode("")}function h(t,e){return e?document.createElementNS("http://www.w3.org/2000/svg","svg"):document.createElement(t)}function v(t){if(t.outerHTML)return t.outerHTML;var e=h("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}function g(t,e){if(i(t.innerHTML)){var n=(new DOMParser).parseFromString(e,"application/xml"),r=t.ownerDocument.importNode(n.documentElement,!0);t.appendChild(r)}else t.innerHTML=e}function m(t,e){t.removeAttribute(e)}function y(t,e){return t.getAttribute(e)}function w(t,e,n){var r=ee.exec(e);r&&r[1]?t.setAttributeNS(te,r[1],n):t.setAttribute(e,n)}function b(t,e,n){t.insertBefore(e,n.parentNode&&n)}function _(t,e){if(t)for(var n;n=se.exec(t);)e(n[1].toLowerCase(),n[2]||n[3]||n[4])}function x(t,e,n){if(t){var r,i=e(t,n);if(i===!1)return;for(t=t.firstChild;t;)r=t.nextSibling,x(t,e,i),t=r}}function C(t,e){for(var n,r=t?t.length:0,i=0;i<r;++i)n=t[i],e(n,i)===!1&&i--;return t}function O(t,e){return~t.indexOf(e)}function j(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function E(t,e){return t.slice(0,e.length)===e}function N(t,e,n,r){return Object.defineProperty(t,e,S({value:n,enumerable:!1,writable:!1,configurable:!0},r)),t}function S(t){for(var e,n=arguments,r=1;r<n.length;++r)if(e=n[r])for(var i in e)u(t,i)&&(t[i]=e[i]);return t}function T(t,e,n){var r=this._parent,i=this._item;if(!i)for(;r&&!i;)i=r._item,r=r._parent;if(u(n,"currentTarget")&&(n.currentTarget=t),u(n,"target")&&(n.target=n.srcElement),u(n,"which")&&(n.which=n.charCode||n.keyCode),n.item=i,e.call(this,n),!n.preventUpdate){var o=ot(this);o.isMounted&&o.update()}}function L(t,e,n,r){var i,o=T.bind(r,n,e);return n.addEventListener?(n[t]=null,i=t.replace(ge,""),n._riotEvents||(n._riotEvents={}),n._riotEvents[t]&&n.removeEventListener(i,n._riotEvents[t]),n._riotEvents[t]=o,void n.addEventListener(i,o,!1)):void(n[t]=o)}function P(t,e){var n,r=zt(t.value,e);if(t.tag&&t.tagName===r)return void t.tag.update();if(t.tag){var i=t.value,o=t.tag._parent.tags;w(t.tag.root,Wt,r),lt(o,i,t.tag)}t.impl=Kt[r],n={root:t.dom,parent:e,hasImpl:!0,tagName:r},t.tag=it(t.impl,n,t.dom.innerHTML,e),t.tagName=r,t.tag.mount(),t.tag.update(),e.on("unmount",function(){var e=t.tag.opts.dataIs,n=t.tag.parent.tags,r=t.tag._parent.tags;lt(n,e,t.tag),lt(r,e,t.tag),t.tag.unmount()})}function k(t){var e,r=t.dom,o=t.attr,a=zt(t.expr,this),s="riot-value"===o,u=t.root&&"VIRTUAL"===t.root.tagName,c=r&&(t.parent||r.parentNode);if(t.bool?a=!!a&&o:(i(a)||null===a)&&(a=""),t._riot_id){if(t.isMounted)t.update();else if(t.mount(),u){var l=document.createDocumentFragment();pt.call(t,l),t.root.parentElement.replaceChild(l,t.root)}}else{if(e=t.value,t.value=a,t.update)return void t.update();if(t.isRtag&&a)return P(t,this);if(e!==a&&(!s||r.value!==a)){if(!o)return a+="",void(c&&(t.parent=c,"TEXTAREA"===c.tagName?(c.value=a,ce||(r.nodeValue=a)):r.nodeValue=a));if(t.isAttrRemoved&&a||(m(r,o),t.isAttrRemoved=!0),n(a))L(o,a,r,this);else if(/^(show|hide)$/.test(o))"hide"===o&&(a=!a),r.style.display=a?"":"none";else if(s)r.value=a;else if(E(o,Gt)&&o!==Wt)null!=a&&w(r,o.slice(Gt.length),a);else{if("selected"===o&&c&&/^(SELECT|OPTGROUP)$/.test(c.tagName)&&null!=a&&(c.value=r.value),t.bool&&(r[o]=a,!a))return;(0===a||a&&("undefined"==typeof a?"undefined":_typeof(a))!==Qt)&&w(r,o,a)}}}}function M(t){C(t,k.bind(this))}function R(t,e,n,r){var i=r?Object.create(r):{};return i[t.key]=e,t.pos&&(i[t.pos]=n),i}function A(t,e,n,r){for(var i,o=e.length,a=t.length;o>a;)i=e[--o],e.splice(o,1),i.unmount(),lt(r.tags,n,i,!0)}function I(t){var e=this;C(Object.keys(this.tags),function(n){var r=e.tags[n];s(r)?C(r,function(e){rt.apply(e,[n,t])}):rt.apply(r,[n,t])})}function $(t,e,n){n?ht.apply(this,[t,e]):b(t,this.root,e.root)}function B(t,e,n){n?pt.apply(this,[t,e]):b(t,this.root,e.root)}function H(t,e){e?pt.call(this,t):t.appendChild(this.root)}function D(t,e,n){m(t,"each");var r,i=_typeof(y(t,"no-reorder"))!==Zt||m(t,"no-reorder"),o=st(t),a=Kt[o]||{tmpl:v(t)},u=re.test(o),c=t.parentNode,l=p(),f=et(t),h=y(t,"if"),g=[],w=[],b=!0,_=!Kt[o],x="VIRTUAL"===t.tagName;return n=zt.loopKeys(n),n.isLoop=!0,h&&m(t,"if"),c.insertBefore(l,t),c.removeChild(t),n.update=function(){var v,m,y,j=zt(n.val,e);c=l.parentNode,v?(y=p(""),v.insertBefore(y,c),v.removeChild(c)):m=d(),s(j)?r=!1:(r=j||!1,j=r?Object.keys(j).map(function(t){return R(n,j[t],t)}):[]),h&&(j=j.filter(function(t,r){return n.key?!!zt(h,R(n,t,r,e)):!!zt(h,e)||!!zt(h,t)})),C(j,function(s,l){var d=i&&("undefined"==typeof s?"undefined":_typeof(s))===Qt&&!r,p=w.indexOf(s),h=~p&&d?p:l,v=g[h];if(s=!r&&n.key?R(n,s,l):s,!d&&!v||d&&!~p){var y=l===g.length;v=new tt(a,{parent:e,isLoop:b,isAnonymous:_,root:u?c:t.cloneNode(),item:s},t.innerHTML),v.mount(),y?H.apply(v,[m||c,x]):B.apply(v,[c,g[l],x]),y||w.splice(l,0,s),g.splice(l,0,v),f&&ct(e.tags,o,v,!0),h=l}else v.update(s);h!==l&&d&&(O(j,w[l])&&$.apply(v,[c,g[l],x]),n.pos&&(v[n.pos]=l),g.splice(l,0,g.splice(h,1)[0]),w.splice(l,0,w.splice(h,1)[0]),!f&&v.tags&&I.call(v,l)),v._item=s,N(v,"_parent",e)}),A(j,g,o,e),w=j.slice(),m?c.insertBefore(m,l):(v.insertBefore(c,y),v.removeChild(y))},n.unmount=function(){C(g,function(t){t.unmount()})},n}function F(t,e,n){var r=this,i={parent:{children:e}};return x(t,function(e,i){var o=e.nodeType,a=i.parent,s=void 0,u=void 0,c=void 0;if(!n&&e===t)return{parent:a};if(3===o&&"STYLE"!==e.parentNode.tagName&&zt.hasExpr(e.nodeValue)&&a.children.push({dom:e,expr:e.nodeValue}),1!==o)return i;if(s=y(e,"each"))return a.children.push(D(e,r,s)),!1;if(s=y(e,"if"))return a.children.push(Object.create(me).init(e,r,s)),!1;if((u=y(e,Wt))&&zt.hasExpr(u))return a.children.push({isRtag:!0,expr:u,dom:e}),!1;if(c=et(e),c&&(e!==t||n)){var l={root:e,parent:r,hasImpl:!0};return a.children.push(it(c,l,e.innerHTML,r)),!1}return U.apply(r,[e,e.attributes,function(t,e){e&&a.children.push(e)}]),{parent:a}},i),{tree:i,root:t}}function U(t,n,r){var i=this;C(n,function(n){var o,a=n.name,s=e(a);~["ref","data-ref"].indexOf(a)?o=Object.create(ye).init(t,a,n.value,i):zt.hasExpr(n.value)&&(o={dom:t,expr:n.value,attr:n.name,bool:s}),r(n,o)})}function V(t,e,n){var r="o"===n[0],i=r?"select>":"table>";if(t.innerHTML="<"+i+e.trim()+"</"+i,i=t.firstChild,r)i.selectedIndex=-1;else{var o=Ce[n];o&&1===i.childElementCount&&(i=f(o,i))}return i}function z(t,e){if(!we.test(t))return t;var n={};return e=e&&e.replace(_e,function(t,e,r){return n[e]=n[e]||r,""}).trim(),t.replace(xe,function(t,e,r){return n[e]||r||""}).replace(be,function(t,n){return e||n||""})}function J(e,n,r){var i=e&&e.match(/^\s*<([-\w]+)/),o=i&&i[1].toLowerCase(),a=h(je,r&&t(o));return e=z(e,n),Oe.test(o)?a=V(a,e,o):g(a,e),a.stub=!0,a}function K(t,e){var n=this.name,r=this.tmpl,i=this.css,o=this.attrs,a=this.onCreate;return Kt[n]||(q(n,r,i,o,a),Kt[n].class=this.constructor),dt(t,n,e,this),i&&he.inject(),this}function q(t,e,r,i,o){return n(i)&&(o=i,/^[\w\-]+\s?=/.test(r)?(i=r,r=""):i=""),r&&(n(r)?o=r:he.add(r)),t=t.toLowerCase(),Kt[t]={name:t,tmpl:e,attrs:i,fn:o},t}function G(t,e,n,r,i){n&&he.add(n,t);var o=!!Kt[t];return Kt[t]={name:t,tmpl:e,attrs:r,fn:i},o&&ke.hotReloader&&ke.hotReloader(t),t}function W(t,e,n){function i(t){if(t.tagName){var r=y(t,Wt);e&&r!==e&&(r=e,w(t,Wt,e));var o=dt(t,r||t.tagName.toLowerCase(),n);o&&a.push(o)}else t.length&&C(t,i)}var a=[];he.inject(),r(e)&&(n=e,e=0);var s,u;if(o(t)?(t="*"===t?u=vt():t+vt(t.split(/, */)),s=t?l(t):[]):s=t,"*"===e){if(e=u||vt(),s.tagName)s=l(e,s);else{var c=[];C(s,function(t){return c.push(l(e,t))}),s=c}e=0}return i(s),a}function Z(t,e,o){if(r(t))return void Z("__unnamed_"+Se++,t,!0);var a=o?Ne:Ee;if(!e){if(i(a[t]))throw new Error("Unregistered mixin: "+t);return a[t]}a[t]=n(e)?S(e.prototype,a[t]||{})&&e:S(a[t]||{},e)}function Q(){return C(Jt,function(t){return t.update()})}function X(t){delete Kt[t]}function Y(t,e,n,r,i){if(!t||!n){var o=!n&&t?this:e||this;C(i,function(t){t.expr&&M.call(o,[t.expr]),r[j(t.name)]=t.expr?t.expr.value:t.value})}}function tt(t,e,r){var i,a=S({},e.opts),s=e.parent,u=e.isLoop,c=e.isAnonymous,l=ut(e.item),f=[],d=[],p=[],h=e.root,v=e.tagName||st(h),g="virtual"===v,y=[];$t(this),t.name&&h._tag&&h._tag.unmount(!0),this.isMounted=!1,h.isLoop=u,N(this,"_internal",{isAnonymous:c,instAttrs:f,innerHTML:r,virts:[],tail:null,head:null}),N(this,"_riot_id",++Te),S(this,{parent:s,root:h,opts:a},l),N(this,"tags",{}),N(this,"refs",{}),i=J(t.tmpl,r,u),N(this,"update",function(t){return n(this.shouldUpdate)&&!this.shouldUpdate(t)?this:(t=ut(t),u&&c&&nt.apply(this,[this.parent,y]),S(this,t),Y.apply(this,[u,s,c,a,f]),this.isMounted&&this.emit("update",t),M.call(this,p),this.isMounted&&this.emit("updated"),this)}.bind(this)),N(this,"mixin",function(){var t=this;return C(arguments,function(e){var r,i,a=[];e=o(e)?Z(e):e,r=n(e)?new e:e;var s=Object.getPrototypeOf(r);do a=a.concat(Object.getOwnPropertyNames(i||r));while(i=Object.getPrototypeOf(i||r));C(a,function(e){if("init"!==e){var i=Object.getOwnPropertyDescriptor(r,e)||Object.getOwnPropertyDescriptor(s,e),o=i&&(i.get||i.set);!t.hasOwnProperty(e)&&o?Object.defineProperty(t,e,i):t[e]=n(r[e])?r[e].bind(t):r[e]}}),r.init&&r.init.bind(t)()}),this}.bind(this)),N(this,"mount",function(){var e=this;h._tag=this,U.apply(s,[h,h.attributes,function(t,n){!c&&ye.isPrototypeOf(n)&&(n.tag=e),t.expr=n,f.push(t)}]),d=[],_(t.attrs,function(t,e){d.push({name:t,value:e})}),U.apply(this,[h,d,function(t,e){e?p.push(e):w(h,t.name,t.value)}]),this._parent&&c&&nt.apply(this,[this._parent,y]),Y.apply(this,[u,s,c,a,f]);var n=Z(qt);if(n)for(var r in n)n.hasOwnProperty(r)&&this.mixin(n[r]);if(t.fn&&t.fn.call(this,a),this.emit("before-mount"),F.apply(this,[i,p,!1]),this.update(l),u&&c)this.root=h=i.firstChild;else{for(;i.firstChild;)h.appendChild(i.firstChild);h.stub&&(h=s.root)}return N(this,"root",h),this.isMounted=!0,!this.parent||this.parent.isMounted?this.emit("mount"):this.parent.once("mount",function(){e.emit("mount")}),this}.bind(this)),N(this,"unmount",function(t){var e,n=this,r=this.root,i=r.parentNode,o=Jt.indexOf(this);if(this.emit("before-unmount"),~o&&Jt.splice(o,1),i){if(s)e=ot(s),g?Object.keys(this.tags).forEach(function(t){lt(e.tags,t,n.tags[t])}):lt(e.tags,v,this);else for(;r.firstChild;)r.removeChild(r.firstChild);t?m(i,Wt):i.removeChild(r)}return this._internal.virts&&C(this._internal.virts,function(t){t.parentNode&&t.parentNode.removeChild(t)}),at(p),C(f,function(t){return t.expr&&t.expr.unmount&&t.expr.unmount()}),this.emit("unmount"),this.off("*"),this.isMounted=!1,delete this.root._tag,this}.bind(this))}function et(t){return t.tagName&&Kt[y(t,Wt)||y(t,Wt)||t.tagName.toLowerCase()]}function nt(t,e){var n=this;C(Object.keys(t),function(r){var o=!c(r)&&O(e,r);(i(n[r])||o)&&(o||e.push(r),n[r]=t[r])})}function rt(t,e){var n,r=this.parent;r&&(n=r.tags[t],s(n)?n.splice(e,0,n.splice(n.indexOf(this),1)[0]):ct(r.tags,t,this))}function it(t,e,n,r){var i=new tt(t,e,n),o=e.tagName||st(e.root,!0),a=ot(r);return i.parent=a,i._parent=r,ct(a.tags,o,i),a!==r&&ct(r.tags,o,i),e.root.innerHTML="",i}function ot(t){for(var e=t;e._internal.isAnonymous&&e.parent;)e=e.parent;return e}function at(t){C(t,function(t){t instanceof tt?t.unmount(!0):t.unmount&&t.unmount()})}function st(t,e){var n=et(t),r=!e&&y(t,Wt);return r&&!zt.hasExpr(r)?r:n?n.name:t.tagName.toLowerCase()}function ut(t){if(!(t instanceof tt||t&&_typeof(t.emit)===Yt))return t;var e={};for(var n in t)oe.test(n)||(e[n]=t[n]);return e}function ct(t,e,n,r){var i=t[e],o=s(i);i&&i===n||(!i&&r?t[e]=[n]:i?(!o||o&&!O(i,n))&&(o?i.push(n):t[e]=[i,n]):t[e]=n)}function lt(t,e,n,r){s(t[e])?(C(t[e],function(r,i){r===n&&t[e].splice(i,1)}),t[e].length?1!==t[e].length||r||(t[e]=t[e][0]):delete t[e]):delete t[e]}function ft(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function dt(t,e,n,r){var i=Kt[e],o=Kt[e].class,a=r||(o?Object.create(o.prototype):{}),s=t._innerHTML=t._innerHTML||t.innerHTML;t.innerHTML="";var u={root:t,opts:n};return n&&n.parent&&(u.parent=n.parent),i&&t&&tt.apply(a,[i,u,s]),a&&a.mount&&(a.mount(!0),O(Jt,a)||Jt.push(a)),a}function pt(t,e){var n,r,i=p(),o=p(),a=d();for(this._internal.head=this.root.insertBefore(i,this.root.firstChild),this._internal.tail=this.root.appendChild(o),r=this._internal.head;r;)n=r.nextSibling,a.appendChild(r),this._internal.virts.push(r),r=n;e?t.insertBefore(a,e._internal.head):t.appendChild(a)}function ht(t,e){for(var n,r=this._internal.head,i=d();r;)if(n=r.nextSibling,i.appendChild(r),r=n,r===this._internal.tail){i.appendChild(r),t.insertBefore(i,e._internal.head);break}}function vt(t){if(!t){var e=Object.keys(Kt);return e+vt(e)}return t.filter(function(t){return!/[^-\w]/.test(t)}).reduce(function(t,e){var n=e.trim().toLowerCase();return t+(",["+Wt+'="'+n+'"]')},"")}function gt(t){return t.split(/[\/?#]/)}function mt(t,e){var n=new RegExp("^"+e[He](/\*/g,"([^/?#]+?)")[He](/\.\./,".*")+"$"),r=t.match(n);if(r)return r.slice(1)}function yt(t,e){var n=void 0;return function(){clearTimeout(n),n=setTimeout(t,e)}}function wt(t){Ye=yt(jt,1),ze[$e](De,Ye),ze[$e](Fe,Ye),Je[$e](We,Et),t&&jt(!0)}function bt(){this.$=[],$t(this),Ze.on("stop",this.s.bind(this)),Ze.on("emit",this.e.bind(this))}function _t(t){return t[He](/^\/|\/$/,"")}function xt(t){return"string"==typeof t}function Ct(t){return(t||qe.href)[He](Re,"")}function Ot(t){return"#"===tn[0]?(t||qe.href||"").split(tn)[1]||"":(qe?Ct(t):t||"")[He](tn,"")}function jt(t){var e=0===an;Ve<=an||(an++,on.push(function(){var e=Ot();(t||e!==en)&&(Ze[Ue]("emit",e),en=e)}),e&&!function(){var t=void 0,e=function e(){t=on.shift(),t&&(t(),e())};e(),an=0}())}function Et(t){if(!(1!==t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var e=t.target;e&&"A"!==e.nodeName;)e=e.parentNode;!e||"A"!==e.nodeName||e[Be]("download")||!e[Be]("href")||e.target&&"_self"!==e.target||e.href.indexOf(qe.href.match(Re)[0])===-1||e.href!==qe.href&&(e.href.split("#")[0]===qe.href.split("#")[0]||"#"!==tn[0]&&0!==Ct(e.href).indexOf(tn)||"#"===tn[0]&&e.href.split(tn)[0]!==qe.href.split(tn)[0]||!Nt(Ot(e.href),e.title||Je.title))||t.preventDefault()}}function Nt(t,e,n){return Ke?(t=tn+_t(t),e=e||Je.title,n?Ke.replaceState(null,e,t):Ke.pushState(null,e,t),Je.title=e,Xe=!1,jt(),Xe):Ze[Ue]("emit",Ot(t))}var St=function(t){var e=document.createElement("b");return e.innerHTML="<!--[if lt IE "+t+"]><i></i><![endif]-->",1===e.getElementsByTagName("i").length},Tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},Lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")},Pt=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={},n=decodeURIComponent(t).replace(/^\?/,"").split("&"),r=n.length,i=0,o=void 0;i<r;i++)n[i]&&(o=n[i].split("="),e[o[0]]=o[1]);return e},kt=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Tt({method:"GET",data:{},headers:{},cache:!1,type:"json",done:function(){},fail:function(){},progress:function(){},complete:function(){}},n),t=void 0,i=0,o=[],a=e.split("/").pop().search(/\?/)!==-1;r.cache||(e+=(a?"&":"?")+"_="+Math.random(),a=!0),""!==Lt(r.data)&&o.push(Lt(r.data)),/^put$|^post$/i.test(r.method)?r.headers["Content-type"]="application/x-www-form-urlencoded":o.length>0&&(e+=(a?"&":"?")+o),t=new XMLHttpRequest,t.open(r.method,e,!0);for(var s in r.headers)t.setRequestHeader(s,r.headers[s]);var u=function(t){t.lengthComputable&&(i=Math.round(100*t.loaded/t.total),r.progress.call(t.target,i))};return t.upload&&t.upload.addEventListener("progress",u,!1),t.addEventListener("progress",u,!1),t.addEventListener("load",function(t){var e=void 0;200===t.target.status||304===t.target.status?(e=t.target.responseText,"json"===r.type&&(e=JSON.parse(e)),r.done.call(t.target,e)):r.fail.call(t.target,t.target.status)},!1),t.addEventListener("error",function(){r.fail()},!1),t.addEventListener("loadend",function(){r.complete()},!1),t.done=function(e){return r.done=e,t},t.fail=function(e){return r.fail=e,t},t.progress=function(e){return r.progress=e,t},t.complete=function(e){return r.complete=e,t},t.send(o),t},Mt={set:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2],r={},i=[],o=Tt({path:"/",domain:""},n);if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))throw new Error("Cookie name is required and do not use cookie reserved keywords.");if(r[encodeURIComponent(t)]=encodeURIComponent(e),o.expires)throw new Error("Please use max-age to replace expires");for(var a in o)r[a]=o[a];for(var s in r)i.push(s+"="+r[s]);i=i.join("; "),document.cookie=i+";"},remove:function(t){this.set(t,"",{"max-age":0})},get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!0,n=!1,r=void 0;try{for(var i,o=document.cookie.split("; ")[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,s=a.split("="),u=_slicedToArray(s,2),c=u[0],l=u[1];if(""!==t&&t===c)return decodeURIComponent(l)}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}}},Rt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"script",e=arguments[1],n=arguments[2],r=document.createElement(t),i={script:"src",link:"href",img:"src"},o=Tt({position:"head",attrs:{},success:function(){},error:function(){}},n);if(!i.hasOwnProperty(t))throw new Error("File type:"+t+" is not support dynamic load.");if("undefined"==typeof e)throw new Error("Load file url is required.");if(Object.keys(o.attrs).length)for(var a in o.attrs)r[a]=o.attrs[a];return r[i[t]]=e,"link"===t&&(r.rel="stylesheet"),r.addEventListener("load",o.success,!1),r.addEventListener("error",o.error,!1),document[o.position].appendChild(r),r},At=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"script",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"head",n=arguments[2],r=0,i=document[e].getElementsByTagName(t);r<i.length;r++)i[r].rel===n&&i[r].parentNode.removeChild(i[r])},It=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="_hc_json_"+t.split("/").pop().split(".")[0],r=Tt({force:!1,done:function(){},fail:function(){}},e);return"localStorage"in window&&Mt.get(""+n)&&!r.force?setTimeout(function(){r.done.call(null,JSON.parse(window.localStorage.getItem(n)))},0):kt(t).done(function(t){Mt.set(n,"y"),window.localStorage&&window.localStorage.setItem(n,JSON.stringify(t)),r.done.call(null,t)}).fail(function(t){r.fail.call(null,t)}),r.done=function(t){return r.done=t,r},r.fail=function(t){return r.fail=t,r},r},$t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return t.__emited=t.__emited||{},Object.defineProperty(t,"on",{value:function(n,r){return"function"==typeof r&&((e[n]=e[n]||[]).push(r),t.__emited[n]&&r.apply(t,t.__emited[n])),t}}),Object.defineProperty(t,"once",{value:function(e,n){var r=function r(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];t.off(e,r),n.apply(t,o)};return t.on(e,r)}}),Object.defineProperty(t,"off",{value:function(n,r){if("*"!==n||r){if(r)for(var i in e[n])e[n][i]==r&&e[n].splice(i,1);else delete e[n];delete t.__emited[n]}else e={};return t}}),Object.defineProperty(t,"emit",{value:function(n){for(var r=(e[n]||[]).slice(0),i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var d=l.value;d.apply(t,o)}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}return t.__emited[name]=[name].concat(o),e["*"]&&"*"!==n&&t.emit.apply(t,["*",n].concat(o)),t}}),t},Bt=void 0,Ht=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(_classCallCheck(this,t),0===n.length)throw new Error("Promise needs (resolve, reject) at least one function name.");return $t(this),this._resolve=function(t){e.emit("resolve",t),e._emited_value=t,e.off("reject")},1===n.length?n.call(this,this._resolve):(this._reject=function(t){e.emit("reject",t),e.off("resolve")},n.call(this,this._resolve,this._reject)),this}return t.all=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return new t(function(t,r){var i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;c.then(function(r){n.push(r),n.length===e.length&&t(n)}).catch(function(t){r(t)})}}catch(t){o=!0,a=t}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}})},t.resolve=function(e){return e instanceof Bt?e:new t(function(t){setTimeout(function(){t(e)},0)})},t.reject=function(e){return new t(function(t,n){setTimeout(function(){n(e)},0)})},t.prototype.then=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments[1];return this.once("resolve",function(n){try{if(t.__chain_value instanceof Bt)return void t.__chain_value.then(e);t.__chain_value=e.call(null,t.__chain_value||n)}catch(e){t.emit("reject",e)}}),"function"==typeof n?this.catch(n):(this._emited_value&&this.emit("resolve",this._emited_value),this)},t.prototype.catch=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return this.once("reject",function(n){var r=void 0;try{if(t.__no_throw)return;r=e.call(null,n),t.__no_throw=!0,r&&t.emit("resolve",r)}catch(e){if(t.emit("reject",e),!t.__no_throw)throw e}}),this},t}();Bt=Ht,"Promise"in window&&(Bt=window.Promise);var Dt,Ft,Ut=function(){function t(){_classCallCheck(this,t)}return t.alias=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;t[u]&&0!==t[u].length&&n.push(t[u])}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.depend.apply(this,n)},t.depend=function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0,o=[],a=[],s=function e(r,s){i===n.length&&(o.length>0?s(o):r(a)),t.batch.apply(t,n[i]).then(function(t){a=a.concat(t),i++,e(r,s)}).catch(function(t){o=o.concat(t),i++,e(r,s)})};return new Bt(s)},t.batch=function(){var t=this,e=[],n=[],r=[],i=[];this._loaded_files=this._loaded_files||[];for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=!0,c=!1,l=void 0;try{for(var f,d=a[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var p=f.value,h=!1,v=!0,g=!1,m=void 0;try{for(var y,w=e[Symbol.iterator]();!(v=(y=w.next()).done);v=!0){var b=y.value;p.split("/").pop()===b.split("/").pop()&&(h=!0,n=n.concat(p))}}catch(t){g=!0,m=t}finally{try{!v&&w.return&&w.return()}finally{if(g)throw m}}h||(e=e.concat(p))}}catch(t){c=!0,l=t}finally{try{!u&&d.return&&d.return()}finally{if(c)throw l}}return new Bt(function(o,a){var s=function(){var n=!0,o=!1,a=void 0;try{for(var s,c=function(){var e=s.value,n=e.split("/").pop(),o=n.split(".").pop().split("?")[0],a={rel:e},c=t.types[o];return"js"===o&&(a.defer=!0),t._loaded_files.indexOf(e)!==-1?(u(i.push(e)),"continue"):void Rt(c,e,{attrs:a,success:function(){t._loaded_files.push(e),u(i.push(e))},error:function(){At(c,"head",e),u(r.push(e))}})},l=e[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){c()}}catch(t){o=!0,a=t}finally{try{!n&&l.return&&l.return()}finally{if(o)throw a}}},u=function(){if(i.length===e.length)return o(i);if(i.length+r.length===e.length){var u=!1;for(var c in r)for(var l in n)n[l].split("/").pop()===r[c].split("/").pop()&&(u=!0,i=i.concat(n[l]),n.splice(l,1));if(u&&i.length===e.length){var f=!0,d=!1,p=void 0;try{for(var h,v=e[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var g=h.value;At(t.types[g.split(".").pop()],"head",g)}}catch(t){d=!0,p=t}finally{try{!f&&v.return&&v.return()}finally{if(d)throw p}}e=i,i=[],r=[],s()}else a(r)}};s()})},_createClass(t,null,[{key:"types",get:function(){return{js:"script",css:"link"}}}]),t}(),Vt=function(t){function e(t){return t}function n(t,e){return e||(e=w),new RegExp(t.source.replace(/{/g,e[2]).replace(/}/g,e[3]),t.global?c:"")}function r(t){if(t===g)return m;var e=t.split(" ");if(2!==e.length||p.test(t))throw new Error('Unsupported brackets "'+t+'"');return e=e.concat(t.replace(h,"\\").split(" ")),e[4]=n(e[1].length>1?/{[\S\s]*?}/:m[4],e),e[5]=n(t.length>3?/\\({|})/g:m[5],e),e[6]=n(m[6],e),e[7]=RegExp("\\\\("+e[3]+")|([[({])|("+e[3]+")|"+d,c),e[8]=t,e}function i(t){return t instanceof RegExp?s(t):w[t]}function o(t){(t||(t=g))!==w[8]&&(w=r(t),s=t===g?e:n,w[9]=s(m[9])),y=t}function a(t){var e;t=t||{},e=t.brackets,Object.defineProperty(t,"brackets",{set:o,get:function(){return y},enumerable:!0}),u=t,o(e)}var s,u,c="g",l=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,f=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,d=f.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,p=RegExp("[\\x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),h=/(?=[[\]()*+?.^$|])/g,v={"(":RegExp("([()])|"+d,c),"[":RegExp("([[\\]])|"+d,c),"{":RegExp("([{}])|"+d,c)},g="{ }",m=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+d,c),g,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],y=t,w=[];return i.split=function(t,e,n){function r(t){e||a?c.push(t&&t.replace(n[5],"$1")):c.push(t)}function i(t,e,n){var r,i=v[e];for(i.lastIndex=n,n=1;(r=i.exec(t))&&(!r[1]||(r[1]===e?++n:--n)););return n?t.length:i.lastIndex}n||(n=w);var o,a,s,u,c=[],l=n[6];for(a=s=l.lastIndex=0;o=l.exec(t);){if(u=o.index,a){if(o[2]){l.lastIndex=i(t,o[2],l.lastIndex);continue}if(!o[3])continue}o[1]||(r(t.slice(s,u)),s=l.lastIndex,l=n[6+(a^=1)],l.lastIndex=s)}return t&&s<t.length&&r(t.slice(s)),c},i.hasExpr=function(t){return w[4].test(t)},i.loopKeys=function(t){var e=t.match(w[9]);return e?{key:e[1],pos:e[2],val:w[0]+e[3].trim()+w[1]}:{val:t.trim()}},i.array=function(t){return t?r(t):w},Object.defineProperty(i,"settings",{set:a,get:function(){return u}}),i.settings="undefined"!=typeof riot&&riot.settings||{},i.set=o,i.R_STRINGS=f,i.R_MLCOMMS=l,i.S_QBLOCKS=d,i}(),zt=function(){function t(t,r){return t?(a[t]||(a[t]=n(t))).call(r,e):t}function e(e,n){e.riotData={tagName:n&&n.root&&n.root.tagName,_riot_id:n&&n._riot_id},t.errorHandler&&t.errorHandler(e),"undefined"!=typeof console&&"function"==typeof console.error&&(e.riotData.tagName&&console.error("Riot template error thrown in the <%s> tag",e.riotData.tagName),console.error(e))}function n(t){var e=r(t);return"try{return "!==e.slice(0,11)&&(e="return "+e),new Function("E",e+";")}function r(t){var e,n=[],r=Vt.split(t.replace(l,'"'),1);if(r.length>2||r[0]){var o,a,s=[];for(o=a=0;o<r.length;++o)e=r[o],e&&(e=1&o?i(e,1,n):'"'+e.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(s[a++]=e);e=a<2?s[0]:"["+s.join(",")+'].join("")'}else e=i(r[1],0,n);return n[0]&&(e=e.replace(f,function(t,e){return n[e].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),e}function i(t,e,n){function r(e,n){var r,i=1,o=d[e];for(o.lastIndex=n.lastIndex;r=o.exec(t);)if(r[0]===e)++i;else if(!--i)break;n.lastIndex=i?t.length:o.lastIndex}if(t=t.replace(c,function(t,e){return t.length>2&&!e?s+(n.push(t)-1)+"~":t}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var i,a=[],l=0;t&&(i=t.match(u))&&!i.index;){var f,p,h=/,|([[{(])|$/g;for(t=RegExp.rightContext,f=i[2]?n[i[2]].slice(1,-1).trim().replace(/\s+/g," "):i[1];p=(i=h.exec(t))[1];)r(p,h);p=t.slice(0,i.index),t=RegExp.rightContext,a[l++]=o(p,1,f)}t=l?l>1?"["+a.join(",")+'].join(" ").trim()':a[0]:o(t,e)}return t}function o(t,e,n){var r;return t=t.replace(h,function(t,e,n,i,o){return n&&(i=r?0:i+t.length,"this"!==n&&"global"!==n&&"window"!==n?(t=e+'("'+n+p+n,i&&(r="."===(o=o[i])||"("===o||"["===o)):i&&(r=!v.test(o.slice(i)))),t}),r&&(t="try{return "+t+"}catch(e){E(e,this)}"),n?t=(r?"function(){"+t+"}.call(this)":"("+t+")")+'?"'+n+'":""':e&&(t="function(v){"+(r?t.replace("return ","v="):"v=("+t+")")+';return v||v===0?v:""}.call(this)'),t}var a={};t.hasExpr=Vt.hasExpr,t.loopKeys=Vt.loopKeys,t.clearCache=function(){a={}},t.errorHandler=null;var s=String.fromCharCode(8279),u=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,c=RegExp(Vt.S_QBLOCKS,"g"),l=/\u2057/g,f=/\u2057(\d+)~/g,d={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},p='"in this?this:'+("object"!==("undefined"==typeof window?"undefined":_typeof(window))?"global":"window")+").",h=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,v=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return t.version=Vt.version="WIP",t}(),Jt=[],Kt={},qt="__global_mixin",Gt="riot-",Wt="data-is",Zt="string",Qt="object",Xt="undefined",Yt="function",te="http://www.w3.org/1999/xlink",ee=/^xlink:(\w+)/,ne=("undefined"==typeof window?"undefined":_typeof(window))===Xt?void 0:window,re=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,ie=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/,oe=/^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|refs|parent|opts|emit|o(?:n|ff|ne))$/,ae=/^(altGlyph|animate(?:Color)?|circle|clipPath|defs|ellipse|fe(?:Blend|ColorMatrix|ComponentTransfer|Composite|ConvolveMatrix|DiffuseLighting|DisplacementMap|Flood|GaussianBlur|Image|Merge|Morphology|Offset|SpecularLighting|Tile|Turbulence)|filter|font|foreignObject|g(?:lyph)?(?:Ref)?|image|line(?:arGradient)?|ma(?:rker|sk)|missing-glyph|path|pattern|poly(?:gon|line)|radialGradient|rect|stop|svg|switch|symbol|text(?:Path)?|tref|tspan|use)$/,se=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g,ue=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/,ce=0|(ne&&ne.document||{}).documentMode,le=Object.freeze({
isSVGTag:t,isBoolAttr:e,isFunction:n,isObject:r,isUndefined:i,isString:o,isBlank:a,isArray:s,isWritable:u,isReservedName:c}),fe=Object.freeze({$$:l,$:f,createFrag:d,createDOMPlaceholder:p,mkEl:h,getOuterHTML:v,setInnerHTML:g,remAttr:m,getAttr:y,setAttr:w,safeInsert:b,walkAttrs:_,walkNodes:x}),de={},pe=[];ne&&(Dt=function(){var t=h("style");w(t,"type","text/css");var e=f("style[type=riot]");return e?(e.id&&(t.id=e.id),e.parentNode.replaceChild(t,e)):document.getElementsByTagName("head")[0].appendChild(t),t}(),Ft=Dt.styleSheet);var he={styleNode:Dt,add:function(t,e){e?de[e]=t:pe.push(t)},inject:function(){if(ne){var t=Object.keys(de).map(function(t){return de[t]}).concat(pe).join("\n");Ft?Ft.cssText=t:Dt.innerHTML=t}}},ve=Object.freeze({each:C,contains:O,toCamel:j,startsWith:E,defineProperty:N,extend:S}),ge=/^on/,me={init:function(t,e,n){m(t,"if"),this.parentTag=e,this.expr=n,this.stub=document.createTextNode(""),this.pristine=t;var r=t.parentNode;return r.insertBefore(this.stub,t),r.removeChild(t),this},update:function(){var t=zt(this.expr,this.parentTag);t&&!this.current?(this.current=this.pristine.cloneNode(!0),this.stub.parentNode.insertBefore(this.current,this.stub),this.expressions=[],F.apply(this.parentTag,[this.current,this.expressions,!0])):!t&&this.current&&(at(this.expressions),this.current._tag?this.current._tag.unmount():this.current.parentNode&&this.current.parentNode.removeChild(this.current),this.current=null,this.expressions=[]),t&&M.call(this.parentTag,this.expressions)},unmount:function(){at(this.expressions||[]),delete this.pristine,delete this.parentNode,delete this.stub}},ye={init:function(t,e,n,r){return this.dom=t,this.attr=e,this.rawValue=n,this.parent=r,this.hasExp=zt.hasExpr(n),this.firstRun=!0,this},update:function(){var t=this.rawValue;if(this.hasExp&&(t=zt(this.rawValue,this.parent)),this.firstRun||t!==this.value){var e=this.parent&&ot(this.parent),n=this.tag||this.dom;!a(this.value)&&e&&lt(e.refs,this.value,n),a(t)?m(this.dom,this.attr):(e&&ct(e.refs,t,n),w(this.dom,this.attr,t)),this.value=t,this.firstRun=!1}},unmount:function(){var t=this.tag||this.dom,e=this.parent&&ot(this.parent);!a(this.value)&&e&&lt(e.refs,this.value,t),delete this.dom,delete this.parent}},we=/<yield\b/i,be=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,_e=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,xe=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,Ce={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},Oe=ce&&ce<10?re:ie,je="div",Ee={},Ne=Ee[qt]={},Se=0,Te=0,Le=Object.freeze({getTag:et,inheritFrom:nt,moveChildTag:rt,initChildTag:it,getImmediateCustomParentTag:ot,unmountAll:at,getTagName:st,cleanUpData:ut,arrayishAdd:ct,arrayishRemove:lt,isInStub:ft,mountTo:dt,makeVirtual:pt,moveVirtual:ht,selectTags:vt}),Pe=Object.create(Vt.settings),ke={tmpl:zt,brackets:Vt,styleManager:he,vdom:Jt,styleNode:he.styleNode,dom:fe,check:le,misc:ve,tags:Le},Me=Object.freeze({settings:Pe,util:ke,observable:$t,Tag:K,tag:q,tag2:G,mount:W,mixin:Z,update:Q,unregister:X}),Re=/^.+?\/\/+[^\/]+/,Ae="EventListener",Ie="remove"+Ae,$e="add"+Ae,Be="hasAttribute",He="replace",De="popstate",Fe="hashchange",Ue="emit",Ve=3,ze="undefined"!=typeof window&&window,Je="undefined"!=typeof document&&document,Ke=ze&&history,qe=ze&&(Ke.location||ze.location),Ge=bt.prototype,We=Je&&Je.ontouchstart?"touchstart":"click",Ze=$t(),Qe=!1,Xe=!1,Ye=void 0,tn=void 0,en=void 0,nn=void 0,rn=void 0,on=[],an=0;Ge.m=function(t,e,n){!xt(t)||e&&!xt(e)?e?this.r(t,e):this.r("@",t):Nt(t,e,n||!1)},Ge.s=function(){this.off("*"),this.$=[]},Ge.e=function(t){this.$.concat("@").some(function(e){var n=("@"===e?nn:rn)(_t(t),_t(e));if("undefined"!=typeof n)return this[Ue].apply(null,[e].concat(n)),Xe=!0},this)},Ge.r=function(t,e){"@"!==t&&(t="/"+_t(t),this.$.push(t)),this.on(t,e)};var sn=new bt,un=sn.m.bind(sn);un.create=function(){var t=new bt,e=t.m.bind(t);return e.stop=t.s.bind(t),e},un.base=function(t){tn=t||"#",en=Ot()},un.exec=function(){jt(!0)},un.parser=function(t,e){t||e||(nn=gt,rn=mt),t&&(nn=t),e&&(rn=e)},un.query=function(){var t={},e=qe.href||en;return e[He](/[?&](.+?)=([^&]*)/g,function(e,n,r){t[n]=r}),t},un.stop=function(){Qe&&(ze&&(ze[Ie](De,Ye),ze[Ie](Fe,Ye),Je[Ie](We,Et)),Ze[Ue]("stop"),Qe=!1)},un.start=function(t){Qe||(ze&&("complete"===document.readyState?wt(t):ze[$e]("load",function(){setTimeout(function(){wt(t)},1)})),Qe=!0)},un.base(),un.parser();var cn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),this.instance||(window.riot=Me,$t(this),this.config=Tt({id:"app",env:"dev",staticBase:"./static/",routeBase:"#!",mountPage:"page",loginPage:"login",indexPage:"index",errorPage:"500",notFoundPage:"404",resource:[]},e),this.tagMounted={},this.route=un,this.xhr=kt,this.utils={cookie:Mt},this.init(),this.instance=this),this.instance}return t.prototype.init=function(){var t=this,e=this.config;e.resource.push(this.config.env),It(""+e.staticBase+e.id+".json",{force:"pro"!==e.env}).done(function(n){t.loaderJSON=n,Ut.alias(t.loaderJSON,e.resource).then(function(n){un.base(e.routeBase),un.parser(function(t){var e=t.split("?"),n=e[0].split("/"),r=e[1];return r&&n.push(Pt(r)),n}),t.on("route::change",function(n){var r=n[0]||e.indexPage,i=e.staticBase+"riot/"+e.id+"/"+r+".js",o=e.id+"-"+r;t.route.params=n,Ut.batch(i).then(function(){try{!function(){var n=Me.mount(e.mountPage,o)[0],r=function e(n){for(var r in n.tags)t.tagMounted[r]=n.tags[r],e(n.tags[r])};t.tagMounted[o]=n,r(n)}()}catch(n){window.location.replace(e.routeBase+"/"+e.errorPage+"?message="+n.message),t.err(n)}}).catch(function(){window.location.replace(e.routeBase+"/"+e.notFoundPage)})}),un(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.emit("route::change",n)}),un.start(!0),Me.mixin({app:t}),t.emit("init::done",n)}).catch(function(e){t.emit("init::fail",e)})})},t.prototype.log=function(){var t;return"pro"!==this.config.dev?window.console&&(t=window.console).log.apply(t,arguments):null},t.prototype.err=function(){var t;return window.console&&(t=window.console).error.apply(t,arguments)},t.prototype.api=function(){},t.prototype.addResource=function(t){var e=void 0;return this.loaderJSON?(this.loaderJSON[t]?e=t:this.loaderJSON[t+"."+this.config.env]&&(e=t+"."+this.config.env),Ut.alias(this.loaderJSON,[e])):Promise.reject()},t}(),ln=function(t){return t?t:/localhost|127\.0/.test(window.location.origin)?"dev":"pro"};if(St(9))window.location.href="./upgrade.html";else{var fn=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,t.call(this,{id:"fp",env:ln("pro")}))}return _inherits(e,t),e.prototype.api=function(t,e,n){var r={dev:"dev.",test:"test.",pro:""}[this.config.env];return this.xhr("//"+r+"h5.sosho.cn/server/"+e,{method:t,data:n,headers:{}})},e}(cn);new fn}});