"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_slicedToArray=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.App=t.App||{})}(this,function(t){function e(t){return ae.test(t)}function n(t){return ue.test(t)}function r(t){return("undefined"==typeof t?"undefined":_typeof(t))===Yt||!1}function i(t){return t&&("undefined"==typeof t?"undefined":_typeof(t))===Qt}function o(t){return("undefined"==typeof t?"undefined":_typeof(t))===Xt}function a(t){return("undefined"==typeof t?"undefined":_typeof(t))===Zt}function s(t){return o(t)||null===t||""===t}function u(t){return Array.isArray(t)||t instanceof Array}function c(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return o(t[e])||n&&n.writable}function l(t){return oe.test(t)}function f(t,e){return(e||document).querySelectorAll(t)}function d(t,e){return(e||document).querySelector(t)}function h(){return document.createDocumentFragment()}function p(){return document.createTextNode("")}function v(t,e){return e?document.createElementNS("http://www.w3.org/2000/svg","svg"):document.createElement(t)}function m(t){if(t.outerHTML)return t.outerHTML;var e=v("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}function g(t,e){if(o(t.innerHTML)){var n=(new DOMParser).parseFromString(e,"application/xml"),r=t.ownerDocument.importNode(n.documentElement,!0);t.appendChild(r)}else t.innerHTML=e}function y(t,e){t.removeAttribute(e)}function w(t,e){return t.getAttribute(e)}function b(t,e,n){var r=ee.exec(e);r&&r[1]?t.setAttributeNS(te,r[1],n):t.setAttribute(e,n)}function _(t,e,n){t.insertBefore(e,n.parentNode&&n)}function x(t,e){if(t)for(var n;n=se.exec(t);)e(n[1].toLowerCase(),n[2]||n[3]||n[4])}function C(t,e,n){if(t){var r,i=e(t,n);if(i===!1)return;for(t=t.firstChild;t;)r=t.nextSibling,C(t,e,i),t=r}}function O(t,e){for(var n,r=t?t.length:0,i=0;i<r;++i)n=t[i],e(n,i)===!1&&i--;return t}function N(t,e){return~t.indexOf(e)}function j(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function E(t,e){return t.slice(0,e.length)===e}function S(t,e,n,r){return Object.defineProperty(t,e,T({value:n,enumerable:!1,writable:!1,configurable:!0},r)),t}function T(t){for(var e,n=arguments,r=1;r<n.length;++r)if(e=n[r])for(var i in e)c(t,i)&&(t[i]=e[i]);return t}function k(t,e,n){var r=this._parent,i=this._item;if(!i)for(;r&&!i;)i=r._item,r=r._parent;if(c(n,"currentTarget")&&(n.currentTarget=t),c(n,"target")&&(n.target=n.srcElement),c(n,"which")&&(n.which=n.charCode||n.keyCode),n.item=i,e.call(this,n),!n.preventUpdate){var o=at(this);o.isMounted&&o.update()}}function L(t,e,n,r){var i,o=k.bind(r,n,e);return n.addEventListener?(n[t]=null,i=t.replace(me,""),n._riotEvents||(n._riotEvents={}),n._riotEvents[t]&&n.removeEventListener(i,n._riotEvents[t]),n._riotEvents[t]=o,void n.addEventListener(i,o,!1)):void(n[t]=o)}function M(t,e){var n,r=zt(t.value,e);if(t.tag&&t.tagName===r)return void t.tag.update();if(t.tag){var i=t.value,o=t.tag._parent.tags;b(t.tag.root,Wt,r),ft(o,i,t.tag)}t.impl=Kt[r],n={root:t.dom,parent:e,hasImpl:!0,tagName:r},t.tag=ot(t.impl,n,t.dom.innerHTML,e),t.tagName=r,t.tag.mount(),t.tag.update(),e.on("unmount",function(){var e=t.tag.opts.dataIs,n=t.tag.parent.tags,r=t.tag._parent.tags;ft(n,e,t.tag),ft(r,e,t.tag),t.tag.unmount()})}function A(t){var e,n=t.dom,i=t.attr,a=zt(t.expr,this),s="riot-value"===i,u=t.root&&"VIRTUAL"===t.root.tagName,c=n&&(t.parent||n.parentNode);if(t.bool?a=!!a&&i:(o(a)||null===a)&&(a=""),t._riot_id){if(t.isMounted)t.update();else if(t.mount(),u){var l=document.createDocumentFragment();pt.call(t,l),t.root.parentElement.replaceChild(l,t.root)}}else{if(e=t.value,t.value=a,t.update)return void t.update();if(t.isRtag&&a)return M(t,this);if(e!==a&&(!s||n.value!==a)){if(!i)return a+="",void(c&&(t.parent=c,"TEXTAREA"===c.tagName?(c.value=a,ce||(n.nodeValue=a)):n.nodeValue=a));if(t.isAttrRemoved&&a||(y(n,i),t.isAttrRemoved=!0),r(a))L(i,a,n,this);else if(/^(show|hide)$/.test(i))"hide"===i&&(a=!a),n.style.display=a?"":"none";else if(s)n.value=a;else if(E(i,Gt)&&i!==Wt)null!=a&&b(n,i.slice(Gt.length),a);else{if("selected"===i&&c&&/^(SELECT|OPTGROUP)$/.test(c.tagName)&&null!=a&&(c.value=n.value),t.bool&&(n[i]=a,!a))return;(0===a||a&&("undefined"==typeof a?"undefined":_typeof(a))!==Qt)&&b(n,i,a)}}}}function P(t){O(t,A.bind(this))}function R(t,e,n,r){var i=r?Object.create(r):{};return i[t.key]=e,t.pos&&(i[t.pos]=n),i}function I(t,e,n,r){for(var i,o=e.length,a=t.length;o>a;)i=e[--o],e.splice(o,1),i.unmount(),ft(r.tags,n,i,!0)}function $(t){var e=this;O(Object.keys(this.tags),function(n){var r=e.tags[n];u(r)?O(r,function(e){it.apply(e,[n,t])}):it.apply(r,[n,t])})}function B(t,e,n){n?vt.apply(this,[t,e]):_(t,this.root,e.root)}function H(t,e,n){n?pt.apply(this,[t,e]):_(t,this.root,e.root)}function F(t,e){e?pt.call(this,t):t.appendChild(this.root)}function U(t,e,n){y(t,"each");var r,i=_typeof(w(t,"no-reorder"))!==Zt||y(t,"no-reorder"),o=ut(t),a=Kt[o]||{tmpl:m(t)},s=re.test(o),c=t.parentNode,l=p(),f=nt(t),d=w(t,"if"),v=[],g=[],b=!0,_=!Kt[o],x="VIRTUAL"===t.tagName;return n=zt.loopKeys(n),n.isLoop=!0,d&&y(t,"if"),c.insertBefore(l,t),c.removeChild(t),n.update=function(){var m,y,w,C=zt(n.val,e);c=l.parentNode,m?(w=p(""),m.insertBefore(w,c),m.removeChild(c)):y=h(),u(C)?r=!1:(r=C||!1,C=r?Object.keys(C).map(function(t){return R(n,C[t],t)}):[]),d&&(C=C.filter(function(t,r){return n.key?!!zt(d,R(n,t,r,e)):!!zt(d,e)||!!zt(d,t)})),O(C,function(u,l){var d=i&&("undefined"==typeof u?"undefined":_typeof(u))===Qt&&!r,h=g.indexOf(u),p=~h&&d?h:l,m=v[p];if(u=!r&&n.key?R(n,u,l):u,!d&&!m||d&&!~h){var w=l===v.length;m=new et(a,{parent:e,isLoop:b,isAnonymous:_,root:s?c:t.cloneNode(),item:u},t.innerHTML),m.mount(),w?F.apply(m,[y||c,x]):H.apply(m,[c,v[l],x]),w||g.splice(l,0,u),v.splice(l,0,m),f&&lt(e.tags,o,m,!0),p=l}else m.update(u);p!==l&&d&&(N(C,g[l])&&B.apply(m,[c,v[l],x]),n.pos&&(m[n.pos]=l),v.splice(l,0,v.splice(p,1)[0]),g.splice(l,0,g.splice(p,1)[0]),!f&&m.tags&&$.call(m,l)),m._item=u,S(m,"_parent",e)}),I(C,v,o,e),g=C.slice(),y?c.insertBefore(y,l):(m.insertBefore(c,w),m.removeChild(w))},n.unmount=function(){O(v,function(t){t.unmount()})},n}function D(t,e,n){var r=this,i={parent:{children:e}};return C(t,function(e,i){var o=e.nodeType,a=i.parent,s=void 0,u=void 0,c=void 0;if(!n&&e===t)return{parent:a};if(3===o&&"STYLE"!==e.parentNode.tagName&&zt.hasExpr(e.nodeValue)&&a.children.push({dom:e,expr:e.nodeValue}),1!==o)return i;if(s=w(e,"each"))return a.children.push(U(e,r,s)),!1;if(s=w(e,"if"))return a.children.push(Object.create(ge).init(e,r,s)),!1;if((u=w(e,Wt))&&zt.hasExpr(u))return a.children.push({isRtag:!0,expr:u,dom:e}),!1;if(c=nt(e),c&&(e!==t||n)){var l={root:e,parent:r,hasImpl:!0};return a.children.push(ot(c,l,e.innerHTML,r)),!1}return V.apply(r,[e,e.attributes,function(t,e){e&&a.children.push(e)}]),{parent:a}},i),{tree:i,root:t}}function V(t,e,r){var i=this;O(e,function(e){var o,a=e.name,s=n(a);~["ref","data-ref"].indexOf(a)?o=Object.create(ye).init(t,a,e.value,i):zt.hasExpr(e.value)&&(o={dom:t,expr:e.value,attr:e.name,bool:s}),r(e,o)})}function z(t,e,n){var r="o"===n[0],i=r?"select>":"table>";if(t.innerHTML="<"+i+e.trim()+"</"+i,i=t.firstChild,r)i.selectedIndex=-1;else{var o=Ce[n];o&&1===i.childElementCount&&(i=d(o,i))}return i}function J(t,e){if(!we.test(t))return t;var n={};return e=e&&e.replace(_e,function(t,e,r){return n[e]=n[e]||r,""}).trim(),t.replace(xe,function(t,e,r){return n[e]||r||""}).replace(be,function(t,n){return e||n||""})}function K(t,n,r){var i=t&&t.match(/^\s*<([-\w]+)/),o=i&&i[1].toLowerCase(),a=v(Ne,r&&e(o));return t=J(t,n),Oe.test(o)?a=z(a,t,o):g(a,t),a.stub=!0,a}function q(t,e){var n=this.name,r=this.tmpl,i=this.css,o=this.attrs,a=this.onCreate;return Kt[n]||(G(n,r,i,o,a),Kt[n].class=this.constructor),ht(t,n,e,this),i&&pe.inject(),this}function G(t,e,n,i,o){return r(i)&&(o=i,/^[\w\-]+\s?=/.test(n)?(i=n,n=""):i=""),n&&(r(n)?o=n:pe.add(n)),t=t.toLowerCase(),Kt[t]={name:t,tmpl:e,attrs:i,fn:o},t}function W(t,e,n,r,i){n&&pe.add(n,t);var o=!!Kt[t];return Kt[t]={name:t,tmpl:e,attrs:r,fn:i},o&&Me.hotReloader&&Me.hotReloader(t),t}function Z(t,e,n){function r(t){if(t.tagName){var i=w(t,Wt);e&&i!==e&&(i=e,b(t,Wt,e));var a=ht(t,i||t.tagName.toLowerCase(),n);a&&o.push(a)}else t.length&&O(t,r)}var o=[];pe.inject(),i(e)&&(n=e,e=0);var s,u;if(a(t)?(t="*"===t?u=mt():t+mt(t.split(/, */)),s=t?f(t):[]):s=t,"*"===e){if(e=u||mt(),s.tagName)s=f(e,s);else{var c=[];O(s,function(t){return c.push(f(e,t))}),s=c}e=0}return r(s),o}function Q(t,e,n){if(i(t))return void Q("__unnamed_"+Se++,t,!0);var a=n?Ee:je;if(!e){if(o(a[t]))throw new Error("Unregistered mixin: "+t);return a[t]}a[t]=r(e)?T(e.prototype,a[t]||{})&&e:T(a[t]||{},e)}function X(){return O(Jt,function(t){return t.update()})}function Y(t){delete Kt[t]}function tt(t,e,n,r,i){if(!t||!n){var o=!n&&t?this:e||this;O(i,function(t){t.expr&&P.call(o,[t.expr]),r[j(t.name)]=t.expr?t.expr.value:t.value})}}function et(t,e,n){var i,o=T({},e.opts),s=e.parent,u=e.isLoop,c=e.isAnonymous,l=ct(e.item),f=[],d=[],h=[],p=e.root,v=e.tagName||ut(p),m="virtual"===v,g=[];$t(this),t.name&&p._tag&&p._tag.unmount(!0),this.isMounted=!1,p.isLoop=u,S(this,"_internal",{isAnonymous:c,instAttrs:f,innerHTML:n,virts:[],tail:null,head:null}),S(this,"_riot_id",++Te),T(this,{parent:s,root:p,opts:o},l),S(this,"tags",{}),S(this,"refs",{}),i=K(t.tmpl,n,u),S(this,"update",function(t){return r(this.shouldUpdate)&&!this.shouldUpdate(t)?this:(t=ct(t),u&&c&&rt.apply(this,[this.parent,g]),T(this,t),tt.apply(this,[u,s,c,o,f]),this.isMounted&&this.emit("update",t),P.call(this,h),this.isMounted&&this.emit("updated"),this)}.bind(this)),S(this,"mixin",function(){var t=this;return O(arguments,function(e){var n,i,o=[];e=a(e)?Q(e):e,n=r(e)?new e:e;var s=Object.getPrototypeOf(n);do o=o.concat(Object.getOwnPropertyNames(i||n));while(i=Object.getPrototypeOf(i||n));O(o,function(e){if("init"!==e){var i=Object.getOwnPropertyDescriptor(n,e)||Object.getOwnPropertyDescriptor(s,e),o=i&&(i.get||i.set);!t.hasOwnProperty(e)&&o?Object.defineProperty(t,e,i):t[e]=r(n[e])?n[e].bind(t):n[e]}}),n.init&&n.init.bind(t)()}),this}.bind(this)),S(this,"mount",function(){var e=this;p._tag=this,V.apply(s,[p,p.attributes,function(t,n){!c&&ye.isPrototypeOf(n)&&(n.tag=e),t.expr=n,f.push(t)}]),d=[],x(t.attrs,function(t,e){d.push({name:t,value:e})}),V.apply(this,[p,d,function(t,e){e?h.push(e):b(p,t.name,t.value)}]),this._parent&&c&&rt.apply(this,[this._parent,g]),tt.apply(this,[u,s,c,o,f]);var n=Q(qt);if(n)for(var r in n)n.hasOwnProperty(r)&&this.mixin(n[r]);if(t.fn&&t.fn.call(this,o),this.emit("before-mount"),D.apply(this,[i,h,!1]),this.update(l),u&&c)this.root=p=i.firstChild;else{for(;i.firstChild;)p.appendChild(i.firstChild);p.stub&&(p=s.root)}return S(this,"root",p),this.isMounted=!0,!this.parent||this.parent.isMounted?this.emit("mount"):this.parent.once("mount",function(){e.emit("mount")}),this}.bind(this)),S(this,"unmount",function(t){var e,n=this,r=this.root,i=r.parentNode,o=Jt.indexOf(this);if(this.emit("before-unmount"),~o&&Jt.splice(o,1),i){if(s)e=at(s),m?Object.keys(this.tags).forEach(function(t){ft(e.tags,t,n.tags[t])}):ft(e.tags,v,this);else for(;r.firstChild;)r.removeChild(r.firstChild);t?y(i,Wt):i.removeChild(r)}return this._internal.virts&&O(this._internal.virts,function(t){t.parentNode&&t.parentNode.removeChild(t)}),st(h),O(f,function(t){return t.expr&&t.expr.unmount&&t.expr.unmount()}),this.emit("unmount"),this.off("*"),this.isMounted=!1,delete this.root._tag,this}.bind(this))}function nt(t){return t.tagName&&Kt[w(t,Wt)||w(t,Wt)||t.tagName.toLowerCase()]}function rt(t,e){var n=this;O(Object.keys(t),function(r){var i=!l(r)&&N(e,r);(o(n[r])||i)&&(i||e.push(r),n[r]=t[r])})}function it(t,e){var n,r=this.parent;r&&(n=r.tags[t],u(n)?n.splice(e,0,n.splice(n.indexOf(this),1)[0]):lt(r.tags,t,this))}function ot(t,e,n,r){var i=new et(t,e,n),o=e.tagName||ut(e.root,!0),a=at(r);return i.parent=a,i._parent=r,lt(a.tags,o,i),a!==r&&lt(r.tags,o,i),e.root.innerHTML="",i}function at(t){for(var e=t;e._internal.isAnonymous&&e.parent;)e=e.parent;return e}function st(t){O(t,function(t){t instanceof et?t.unmount(!0):t.unmount&&t.unmount()})}function ut(t,e){var n=nt(t),r=!e&&w(t,Wt);return r&&!zt.hasExpr(r)?r:n?n.name:t.tagName.toLowerCase()}function ct(t){if(!(t instanceof et||t&&_typeof(t.emit)===Yt))return t;var e={};for(var n in t)oe.test(n)||(e[n]=t[n]);return e}function lt(t,e,n,r){var i=t[e],o=u(i);i&&i===n||(!i&&r?t[e]=[n]:i?(!o||o&&!N(i,n))&&(o?i.push(n):t[e]=[i,n]):t[e]=n)}function ft(t,e,n,r){u(t[e])?(O(t[e],function(r,i){r===n&&t[e].splice(i,1)}),t[e].length?1!==t[e].length||r||(t[e]=t[e][0]):delete t[e]):delete t[e]}function dt(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function ht(t,e,n,r){var i=Kt[e],o=Kt[e].class,a=r||(o?Object.create(o.prototype):{}),s=t._innerHTML=t._innerHTML||t.innerHTML;t.innerHTML="";var u={root:t,opts:n};return n&&n.parent&&(u.parent=n.parent),i&&t&&et.apply(a,[i,u,s]),a&&a.mount&&(a.mount(!0),N(Jt,a)||Jt.push(a)),a}function pt(t,e){var n,r,i=p(),o=p(),a=h();for(this._internal.head=this.root.insertBefore(i,this.root.firstChild),this._internal.tail=this.root.appendChild(o),r=this._internal.head;r;)n=r.nextSibling,a.appendChild(r),this._internal.virts.push(r),r=n;e?t.insertBefore(a,e._internal.head):t.appendChild(a)}function vt(t,e){for(var n,r=this._internal.head,i=h();r;)if(n=r.nextSibling,i.appendChild(r),r=n,r===this._internal.tail){i.appendChild(r),t.insertBefore(i,e._internal.head);break}}function mt(t){if(!t){var e=Object.keys(Kt);return e+mt(e)}return t.filter(function(t){return!/[^-\w]/.test(t)}).reduce(function(t,e){var n=e.trim().toLowerCase();return t+(",["+Wt+'="'+n+'"]')},"")}function gt(t){return t.split(/[\/?#]/)}function yt(t,e){var n=new RegExp("^"+e[He](/\*/g,"([^/?#]+?)")[He](/\.\./,".*")+"$"),r=t.match(n);if(r)return r.slice(1)}function wt(t,e){var n=void 0;return function(){clearTimeout(n),n=setTimeout(t,e)}}function bt(t){Ye=wt(jt,1),ze[$e](Fe,Ye),ze[$e](Ue,Ye),Je[$e](We,Et),t&&jt(!0)}function _t(){this.$=[],$t(this),Ze.on("stop",this.s.bind(this)),Ze.on("emit",this.e.bind(this))}function xt(t){return t[He](/^\/|\/$/,"")}function Ct(t){return"string"==typeof t}function Ot(t){return(t||qe.href)[He](Pe,"")}function Nt(t){return"#"===tn[0]?(t||qe.href||"").split(tn)[1]||"":(qe?Ot(t):t||"")[He](tn,"")}function jt(t){var e=0===an;Ve<=an||(an++,on.push(function(){var e=Nt();(t||e!==en)&&(Ze[De]("emit",e),en=e)}),e&&!function(){var t=void 0,e=function e(){t=on.shift(),t&&(t(),e())};e(),an=0}())}function Et(t){if(!(1!==t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var e=t.target;e&&"A"!==e.nodeName;)e=e.parentNode;!e||"A"!==e.nodeName||e[Be]("download")||!e[Be]("href")||e.target&&"_self"!==e.target||e.href.indexOf(qe.href.match(Pe)[0])===-1||e.href!==qe.href&&(e.href.split("#")[0]===qe.href.split("#")[0]||"#"!==tn[0]&&0!==Ot(e.href).indexOf(tn)||"#"===tn[0]&&e.href.split(tn)[0]!==qe.href.split(tn)[0]||!St(Nt(e.href),e.title||Je.title))||t.preventDefault()}}function St(t,e,n){return Ke?(t=tn+xt(t),e=e||Je.title,n?Ke.replaceState(null,e,t):Ke.pushState(null,e,t),Je.title=e,Xe=!1,jt(),Xe):Ze[De]("emit",Nt(t))}var Tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},kt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")},Lt=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={},n=decodeURIComponent(t).replace(/^\?/,"").split("&"),r=n.length,i=0,o=void 0;i<r;i++)n[i]&&(o=n[i].split("="),e[o[0]]=o[1]);return e},Mt=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Tt({method:"GET",data:{},headers:{},cache:!1,type:"json",done:function(){},fail:function(){},progress:function(){},complete:function(){}},n),t=void 0,i=0,o=[],a=e.split("/").pop().search(/\?/)!==-1;r.cache||(e+=(a?"&":"?")+"_="+Math.random(),a=!0),""!==kt(r.data)&&o.push(kt(r.data)),/^put$|^post$/i.test(r.method)?r.headers["Content-type"]="application/x-www-form-urlencoded":o.length>0&&(e+=(a?"&":"?")+o),t=new XMLHttpRequest,t.open(r.method,e,!0);for(var s in r.headers)t.setRequestHeader(s,r.headers[s]);return t.upload.onprogress=t.onprogress=function(t){t.lengthComputable&&(i=Math.round(100*t.loaded/t.total),r.progress.call(t.target,i))},t.addEventListener("load",function(t){var e=void 0;200===t.target.status||304===t.target.status?(e=t.target.responseText,"json"===r.type&&(e=JSON.parse(e)),r.done.call(t.target,e)):r.fail.call(t.target,t.target.status)},!1),t.addEventListener("error",function(){r.fail()},!1),t.addEventListener("loadend",function(){r.complete()},!1),t.done=function(e){return r.done=e,t},t.fail=function(e){return r.fail=e,t},t.progress=function(e){return r.progress=e,t},t.complete=function(e){return r.complete=e,t},t.send(o),t},At={set:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2],r={},i=[],o=Tt({path:"/",domain:""},n);if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))throw new Error("Cookie name is required and do not use cookie reserved keywords.");if(r[encodeURIComponent(t)]=encodeURIComponent(e),o.expires)throw new Error("Please use max-age to replace expires");for(var a in o)r[a]=o[a];for(var s in r)i.push(s+"="+r[s]);i=i.join("; "),document.cookie=i+";"},remove:function(t){this.set(t,"",{"max-age":0})},get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!0,n=!1,r=void 0;try{for(var i,o=document.cookie.split("; ")[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,s=a.split("="),u=_slicedToArray(s,2),c=u[0],l=u[1];if(""!==t&&t===c)return decodeURIComponent(l)}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}}},Pt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"script",e=arguments[1],n=arguments[2],r=document.createElement(t),i={script:"src",link:"href",img:"src"},o=Tt({position:"head",attrs:{},success:function(){},error:function(){}},n);if(!i.hasOwnProperty(t))throw new Error("File type:"+t+" is not support dynamic load.");if("undefined"==typeof e)throw new Error("Load file url is required.");if(Object.keys(o.attrs).length)for(var a in o.attrs)r[a]=o.attrs[a];return r[i[t]]=e,"link"===t&&(r.rel="stylesheet"),r.addEventListener("load",o.success,!1),r.addEventListener("error",o.error,!1),document[o.position].appendChild(r),r},Rt=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"script",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"head",n=arguments[2],r=0,i=document[e].getElementsByTagName(t);r<i.length;r++)i[r].rel===n&&i[r].parentNode.removeChild(i[r])},It=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="_hc_json_"+t.split("/").pop().split(".")[0],r=Tt({force:!1,done:function(){},fail:function(){}},e);return"localStorage"in window&&At.get(""+n)&&!r.force?setTimeout(function(){r.done.call(null,JSON.parse(window.localStorage.getItem(n)))},0):Mt(t).done(function(t){At.set(n,"y"),window.localStorage&&window.localStorage.setItem(n,JSON.stringify(t)),r.done.call(null,t)}).fail(function(t){r.fail.call(null,t)}),r.done=function(t){return r.done=t,r},r.fail=function(t){return r.fail=t,r},r},$t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return t.__emited=t.__emited||{},Object.defineProperty(t,"on",{value:function(n,r){return"function"!=typeof r?t:((e[n]=e[n]||[]).push(r),t.__emited[n]&&r.apply(t,t.__emited[n]),t)}}),Object.defineProperty(t,"once",{value:function(e,n){var r=function r(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];t.off(e,r),n.apply(t,o)};return t.on(e,r)}}),Object.defineProperty(t,"off",{value:function(n,r){if("*"!==n||r){if(r)for(var i in e[n])e[n][i]==r&&e[n].splice(i,1);else delete e[n];delete t.__emited[n]}else e={};return t}}),Object.defineProperty(t,"emit",{value:function(n){for(var r=e[n]||[],i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var d=l.value;d.apply(t,o)}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}return t.__emited[name]=[name].concat(o),e["*"]&&"*"!==n&&t.emit.apply(t,["*",n].concat(o)),t}}),t},Bt=void 0,Ht=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(_classCallCheck(this,t),0===n.length)throw new Error("Promise needs (resolve, reject) at least one function name.");return $t(this),this._resolve=function(t){e.emit("resolve",t),e.off("reject")},1===n.length?n.call(this,this._resolve):(this._reject=function(t){e.emit("reject",t),e.off("resolve")},n.call(this,this._resolve,this._reject)),this}return _createClass(t,[{key:"then",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments[1];return this.on("resolve",function(n){try{if(t.__chain_value instanceof Bt)return void t.__chain_value.then(e);t.__chain_value=e.call(null,t.__chain_value||n)}catch(e){t.emit("reject",e)}}),"function"==typeof n?this.catch(n):this}},{key:"catch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return this.once("reject",function(n){var r=void 0;try{if(t.__no_throw)return;r=e.call(null,n),t.__no_throw=!0,r&&t.emit("resolve",r)}catch(e){if(t.emit("reject",e),!t.__no_throw&&t.__emited.reject[1]===e)throw e}}),this}}],[{key:"all",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return new t(function(t,r){var i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;c.then(function(r){n.push(r),n.length===e.length&&t(n)}).catch(function(t){r(t)})}}catch(t){o=!0,a=t}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}})}},{key:"resolve",value:function(e){return e instanceof Bt?e:new t(function(t){setTimeout(function(){t(e)},0)})}},{key:"reject",value:function(e){return new t(function(t,n){setTimeout(function(){n(e)},0)})}}]),t}();Bt=Ht,"Promise"in window&&(Bt=window.Promise);var Ft,Ut,Dt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"alias",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;t[u]&&0!==t[u].length&&n.push(t[u])}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.depend.apply(this,n)}},{key:"depend",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0,o=[],a=[],s=function e(r,s){i===n.length&&(o.length>0?s(o):r(a)),t.batch.apply(t,n[i]).then(function(t){a=a.concat(t),i++,e(r,s)}).catch(function(t){o=o.concat(t),i++,e(r,s)})};return new Bt(s)}},{key:"batch",value:function(){var t=this,e=[],n=[],r=[],i=[];this._loaded_files=this._loaded_files||[];for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=!0,c=!1,l=void 0;try{for(var f,d=a[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var h=f.value,p=!1,v=!0,m=!1,g=void 0;try{for(var y,w=e[Symbol.iterator]();!(v=(y=w.next()).done);v=!0){var b=y.value;h.split("/").pop()===b.split("/").pop()&&(p=!0,n=n.concat(h))}}catch(t){m=!0,g=t}finally{try{!v&&w.return&&w.return()}finally{if(m)throw g}}p||(e=e.concat(h))}}catch(t){c=!0,l=t}finally{try{!u&&d.return&&d.return()}finally{if(c)throw l}}return new Bt(function(o,a){var s=function(){var n=!0,o=!1,a=void 0;try{for(var s,c=function(){var e=s.value,n=e.split("/").pop(),o=n.split(".").pop(),a={rel:e},c=t.types[o];return"js"===o&&(a.defer=!0),t._loaded_files.indexOf(e)!==-1?(u(i.push(e)),"continue"):void Pt(c,e,{attrs:a,success:function(){t._loaded_files.push(e),u(i.push(e))},error:function(){Rt(c,"head",e),u(r.push(e))}})},l=e[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){c()}}catch(t){o=!0,a=t}finally{try{!n&&l.return&&l.return()}finally{if(o)throw a}}},u=function(){if(i.length===e.length)return o(i);if(i.length+r.length===e.length){var u=!1;for(var c in r)for(var l in n)n[l].split("/").pop()===r[c].split("/").pop()&&(u=!0,i=i.concat(n[l]),n.splice(l,1));if(u&&i.length===e.length){var f=!0,d=!1,h=void 0;try{for(var p,v=e[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var m=p.value;Rt(t.types[m.split(".").pop()],"head",m)}}catch(t){d=!0,h=t}finally{try{!f&&v.return&&v.return()}finally{if(d)throw h}}e=i,i=[],r=[],s()}else a(r)}};s()})}},{key:"types",get:function(){return{js:"script",css:"link"}}}]),t}(),Vt=function(t){function e(t){return t}function n(t,e){return e||(e=w),new RegExp(t.source.replace(/{/g,e[2]).replace(/}/g,e[3]),t.global?c:"")}function r(t){if(t===m)return g;var e=t.split(" ");if(2!==e.length||h.test(t))throw new Error('Unsupported brackets "'+t+'"');return e=e.concat(t.replace(p,"\\").split(" ")),e[4]=n(e[1].length>1?/{[\S\s]*?}/:g[4],e),e[5]=n(t.length>3?/\\({|})/g:g[5],e),e[6]=n(g[6],e),e[7]=RegExp("\\\\("+e[3]+")|([[({])|("+e[3]+")|"+d,c),e[8]=t,e}function i(t){return t instanceof RegExp?s(t):w[t]}function o(t){(t||(t=m))!==w[8]&&(w=r(t),s=t===m?e:n,w[9]=s(g[9])),y=t}function a(t){var e;t=t||{},e=t.brackets,Object.defineProperty(t,"brackets",{set:o,get:function(){return y},enumerable:!0}),u=t,o(e)}var s,u,c="g",l=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,f=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,d=f.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,h=RegExp("[\\x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),p=/(?=[[\]()*+?.^$|])/g,v={"(":RegExp("([()])|"+d,c),"[":RegExp("([[\\]])|"+d,c),"{":RegExp("([{}])|"+d,c)},m="{ }",g=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+d,c),m,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],y=t,w=[];return i.split=function(t,e,n){function r(t){e||a?c.push(t&&t.replace(n[5],"$1")):c.push(t)}function i(t,e,n){var r,i=v[e];for(i.lastIndex=n,n=1;(r=i.exec(t))&&(!r[1]||(r[1]===e?++n:--n)););return n?t.length:i.lastIndex}n||(n=w);var o,a,s,u,c=[],l=n[6];for(a=s=l.lastIndex=0;o=l.exec(t);){if(u=o.index,a){if(o[2]){l.lastIndex=i(t,o[2],l.lastIndex);continue}if(!o[3])continue}o[1]||(r(t.slice(s,u)),s=l.lastIndex,l=n[6+(a^=1)],l.lastIndex=s)}return t&&s<t.length&&r(t.slice(s)),c},i.hasExpr=function(t){return w[4].test(t)},i.loopKeys=function(t){var e=t.match(w[9]);return e?{key:e[1],pos:e[2],val:w[0]+e[3].trim()+w[1]}:{val:t.trim()}},i.array=function(t){return t?r(t):w},Object.defineProperty(i,"settings",{set:a,get:function(){return u}}),i.settings="undefined"!=typeof riot&&riot.settings||{},i.set=o,i.R_STRINGS=f,i.R_MLCOMMS=l,i.S_QBLOCKS=d,i}(),zt=function(){function t(t,r){return t?(a[t]||(a[t]=n(t))).call(r,e):t}function e(e,n){e.riotData={tagName:n&&n.root&&n.root.tagName,_riot_id:n&&n._riot_id},t.errorHandler&&t.errorHandler(e),"undefined"!=typeof console&&"function"==typeof console.error&&(e.riotData.tagName&&console.error("Riot template error thrown in the <%s> tag",e.riotData.tagName),console.error(e))}function n(t){var e=r(t);return"try{return "!==e.slice(0,11)&&(e="return "+e),new Function("E",e+";")}function r(t){var e,n=[],r=Vt.split(t.replace(l,'"'),1);if(r.length>2||r[0]){var o,a,s=[];for(o=a=0;o<r.length;++o)e=r[o],e&&(e=1&o?i(e,1,n):'"'+e.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(s[a++]=e);e=a<2?s[0]:"["+s.join(",")+'].join("")'}else e=i(r[1],0,n);return n[0]&&(e=e.replace(f,function(t,e){return n[e].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),e}function i(t,e,n){function r(e,n){var r,i=1,o=d[e];for(o.lastIndex=n.lastIndex;r=o.exec(t);)if(r[0]===e)++i;else if(!--i)break;n.lastIndex=i?t.length:o.lastIndex}if(t=t.replace(c,function(t,e){return t.length>2&&!e?s+(n.push(t)-1)+"~":t}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var i,a=[],l=0;t&&(i=t.match(u))&&!i.index;){var f,h,p=/,|([[{(])|$/g;for(t=RegExp.rightContext,f=i[2]?n[i[2]].slice(1,-1).trim().replace(/\s+/g," "):i[1];h=(i=p.exec(t))[1];)r(h,p);h=t.slice(0,i.index),t=RegExp.rightContext,a[l++]=o(h,1,f)}t=l?l>1?"["+a.join(",")+'].join(" ").trim()':a[0]:o(t,e)}return t}function o(t,e,n){var r;return t=t.replace(p,function(t,e,n,i,o){return n&&(i=r?0:i+t.length,"this"!==n&&"global"!==n&&"window"!==n?(t=e+'("'+n+h+n,i&&(r="."===(o=o[i])||"("===o||"["===o)):i&&(r=!v.test(o.slice(i)))),t}),r&&(t="try{return "+t+"}catch(e){E(e,this)}"),n?t=(r?"function(){"+t+"}.call(this)":"("+t+")")+'?"'+n+'":""':e&&(t="function(v){"+(r?t.replace("return ","v="):"v=("+t+")")+';return v||v===0?v:""}.call(this)'),t}var a={};t.hasExpr=Vt.hasExpr,t.loopKeys=Vt.loopKeys,t.clearCache=function(){a={}},t.errorHandler=null;var s=String.fromCharCode(8279),u=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,c=RegExp(Vt.S_QBLOCKS,"g"),l=/\u2057/g,f=/\u2057(\d+)~/g,d={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},h='"in this?this:'+("object"!==("undefined"==typeof window?"undefined":_typeof(window))?"global":"window")+").",p=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,v=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return t.version=Vt.version="WIP",t}(),Jt=[],Kt={},qt="__global_mixin",Gt="riot-",Wt="data-is",Zt="string",Qt="object",Xt="undefined",Yt="function",te="http://www.w3.org/1999/xlink",ee=/^xlink:(\w+)/,ne=("undefined"==typeof window?"undefined":_typeof(window))===Xt?void 0:window,re=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,ie=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/,oe=/^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|refs|parent|opts|emit|o(?:n|ff|ne))$/,ae=/^(altGlyph|animate(?:Color)?|circle|clipPath|defs|ellipse|fe(?:Blend|ColorMatrix|ComponentTransfer|Composite|ConvolveMatrix|DiffuseLighting|DisplacementMap|Flood|GaussianBlur|Image|Merge|Morphology|Offset|SpecularLighting|Tile|Turbulence)|filter|font|foreignObject|g(?:lyph)?(?:Ref)?|image|line(?:arGradient)?|ma(?:rker|sk)|missing-glyph|path|pattern|poly(?:gon|line)|radialGradient|rect|stop|svg|switch|symbol|text(?:Path)?|tref|tspan|use)$/,se=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g,ue=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/,ce=0|(ne&&ne.document||{}).documentMode,le=Object.freeze({isSVGTag:e,isBoolAttr:n,isFunction:r,isObject:i,isUndefined:o,isString:a,isBlank:s,isArray:u,isWritable:c,isReservedName:l}),fe=Object.freeze({
$$:f,$:d,createFrag:h,createDOMPlaceholder:p,mkEl:v,getOuterHTML:m,setInnerHTML:g,remAttr:y,getAttr:w,setAttr:b,safeInsert:_,walkAttrs:x,walkNodes:C}),de={},he=[];ne&&(Ft=function(){var t=v("style");b(t,"type","text/css");var e=d("style[type=riot]");return e?(e.id&&(t.id=e.id),e.parentNode.replaceChild(t,e)):document.getElementsByTagName("head")[0].appendChild(t),t}(),Ut=Ft.styleSheet);var pe={styleNode:Ft,add:function(t,e){e?de[e]=t:he.push(t)},inject:function(){if(ne){var t=Object.keys(de).map(function(t){return de[t]}).concat(he).join("\n");Ut?Ut.cssText=t:Ft.innerHTML=t}}},ve=Object.freeze({each:O,contains:N,toCamel:j,startsWith:E,defineProperty:S,extend:T}),me=/^on/,ge={init:function(t,e,n){y(t,"if"),this.parentTag=e,this.expr=n,this.stub=document.createTextNode(""),this.pristine=t;var r=t.parentNode;return r.insertBefore(this.stub,t),r.removeChild(t),this},update:function(){var t=zt(this.expr,this.parentTag);t&&!this.current?(this.current=this.pristine.cloneNode(!0),this.stub.parentNode.insertBefore(this.current,this.stub),this.expressions=[],D.apply(this.parentTag,[this.current,this.expressions,!0])):!t&&this.current&&(st(this.expressions),this.current._tag?this.current._tag.unmount():this.current.parentNode&&this.current.parentNode.removeChild(this.current),this.current=null,this.expressions=[]),t&&P.call(this.parentTag,this.expressions)},unmount:function(){st(this.expressions||[]),delete this.pristine,delete this.parentNode,delete this.stub}},ye={init:function(t,e,n,r){return this.dom=t,this.attr=e,this.rawValue=n,this.parent=r,this.hasExp=zt.hasExpr(n),this.firstRun=!0,this},update:function(){var t=this.rawValue;if(this.hasExp&&(t=zt(this.rawValue,this.parent)),this.firstRun||t!==this.value){var e=this.parent&&at(this.parent),n=this.tag||this.dom;!s(this.value)&&e&&ft(e.refs,this.value,n),s(t)?y(this.dom,this.attr):(e&&lt(e.refs,t,n),b(this.dom,this.attr,t)),this.value=t,this.firstRun=!1}},unmount:function(){var t=this.tag||this.dom,e=this.parent&&at(this.parent);!s(this.value)&&e&&ft(e.refs,this.value,t),delete this.dom,delete this.parent}},we=/<yield\b/i,be=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,_e=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,xe=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,Ce={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},Oe=ce&&ce<10?re:ie,Ne="div",je={},Ee=je[qt]={},Se=0,Te=0,ke=Object.freeze({getTag:nt,inheritFrom:rt,moveChildTag:it,initChildTag:ot,getImmediateCustomParentTag:at,unmountAll:st,getTagName:ut,cleanUpData:ct,arrayishAdd:lt,arrayishRemove:ft,isInStub:dt,mountTo:ht,makeVirtual:pt,moveVirtual:vt,selectTags:mt}),Le=Object.create(Vt.settings),Me={tmpl:zt,brackets:Vt,styleManager:pe,vdom:Jt,styleNode:pe.styleNode,dom:fe,check:le,misc:ve,tags:ke},Ae=Object.freeze({settings:Le,util:Me,observable:$t,Tag:q,tag:G,tag2:W,mount:Z,mixin:Q,update:X,unregister:Y}),Pe=/^.+?\/\/+[^\/]+/,Re="EventListener",Ie="remove"+Re,$e="add"+Re,Be="hasAttribute",He="replace",Fe="popstate",Ue="hashchange",De="emit",Ve=3,ze="undefined"!=typeof window&&window,Je="undefined"!=typeof document&&document,Ke=ze&&history,qe=ze&&(Ke.location||ze.location),Ge=_t.prototype,We=Je&&Je.ontouchstart?"touchstart":"click",Ze=$t(),Qe=!1,Xe=!1,Ye=void 0,tn=void 0,en=void 0,nn=void 0,rn=void 0,on=[],an=0;Ge.m=function(t,e,n){!Ct(t)||e&&!Ct(e)?e?this.r(t,e):this.r("@",t):St(t,e,n||!1)},Ge.s=function(){this.off("*"),this.$=[]},Ge.e=function(t){this.$.concat("@").some(function(e){var n=("@"===e?nn:rn)(xt(t),xt(e));if("undefined"!=typeof n)return this[De].apply(null,[e].concat(n)),Xe=!0},this)},Ge.r=function(t,e){"@"!==t&&(t="/"+xt(t),this.$.push(t)),this.on(t,e)};var sn=new _t,un=sn.m.bind(sn);un.create=function(){var t=new _t,e=t.m.bind(t);return e.stop=t.s.bind(t),e},un.base=function(t){tn=t||"#",en=Nt()},un.exec=function(){jt(!0)},un.parser=function(t,e){t||e||(nn=gt,rn=yt),t&&(nn=t),e&&(rn=e)},un.query=function(){var t={},e=qe.href||en;return e[He](/[?&](.+?)=([^&]*)/g,function(e,n,r){t[n]=r}),t},un.stop=function(){Qe&&(ze&&(ze[Ie](Fe,Ye),ze[Ie](Ue,Ye),Je[Ie](We,Et)),Ze[De]("stop"),Qe=!1)},un.start=function(t){Qe||(ze&&("complete"===document.readyState?bt(t):ze[$e]("load",function(){setTimeout(function(){bt(t)},1)})),Qe=!0)},un.base(),un.parser();var cn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),t.instance||($t(this),this.config=Tt({id:"fp",env:"dev",staticBase:"./static/",routeBase:"#!",mountPage:"#main",loginPage:"login",indexPage:"index",errorPage:"500",notFoundPage:"404",resource:[]},e),this.tagMounted={},window.riot=Ae,this.route=un,this.utils={cookie:At},this.init(),t.instance=this),t.instance}return _createClass(t,[{key:"init",value:function(){var t=this,e=this.config;e.resource.push(this.config.env),It(""+e.staticBase+e.id+".json",{force:"pro"!==e.env}).done(function(n){t.loaderJSON=n,Dt.alias(t.loaderJSON,e.resource).then(function(n){un.base(e.routeBase),un.parser(function(t){var e=t.split("?"),n=e[0].split("/"),r=e[1];return r&&n.push(Lt(r)),n}),t.on("route::change",function(n){var r=n[0]||e.indexPage,i=e.staticBase+"riot/"+e.id+"/"+r+".js",o=e.id+"-"+r;t.route.params=n,Dt.batch(i).then(function(){try{!function(){var n=Ae.mount(e.mountPage,o)[0],r=function e(n){for(var r in n.tags)t.tagMounted[r]=n.tags[r],e(n.tags[r])};t.tagMounted[o]=n,r(n)}()}catch(t){un("/"+e.errorPage+"?message="+t.message),window.console.error(t)}}).catch(function(){un("/"+e.notFoundPage)})}),un(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.emit("route::change",n)}),un.start(!0),Ae.mixin({app:t}),t.emit("init::done",n)}).catch(function(e){t.emit("init::fail",e)})})}},{key:"api",value:function(t,e,n){var r={dev:"dev.",test:"test.",pro:""}[this.config.env];return Mt("//"+r+"h5.sosho.cn/server/"+e,{method:t,data:n,headers:{}})}},{key:"addResource",value:function(t){var e=void 0;return this.loaderJSON?(this.loaderJSON[t]?e=t:this.loaderJSON[t+"."+this.config.env]&&(e=t+"."+this.config.env),Dt.alias(this.loaderJSON,[e])):Promise.reject()}}]),t}();t.FP=cn,Object.defineProperty(t,"__esModule",{value:!0})});