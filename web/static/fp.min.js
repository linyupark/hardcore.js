function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_slicedToArray=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.RiotApp=t.RiotApp||{})}(this,function(t){"use strict";function e(t){return le.test(t)}function n(t){return de.test(t)}function r(t){return("undefined"==typeof t?"undefined":_typeof(t))===re||!1}function i(t){return t&&("undefined"==typeof t?"undefined":_typeof(t))===ee}function o(t){return("undefined"==typeof t?"undefined":_typeof(t))===ne}function a(t){return("undefined"==typeof t?"undefined":_typeof(t))===te}function s(t){return o(t)||null===t||""===t}function u(t){return Array.isArray(t)||t instanceof Array}function c(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return o(t[e])||n&&n.writable}function l(t){return ce.test(t)}function f(t,e){return(e||document).querySelectorAll(t)}function p(t,e){return(e||document).querySelector(t)}function d(){return document.createDocumentFragment()}function h(){return document.createTextNode("")}function v(t,e){return e?document.createElementNS("http://www.w3.org/2000/svg","svg"):document.createElement(t)}function g(t){if(t.outerHTML)return t.outerHTML;var e=v("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}function m(t,e){if(o(t.innerHTML)){var n=(new DOMParser).parseFromString(e,"application/xml"),r=t.ownerDocument.importNode(n.documentElement,!0);t.appendChild(r)}else t.innerHTML=e}function y(t,e){t.removeAttribute(e)}function w(t,e){return t.getAttribute(e)}function _(t,e,n){var r=oe.exec(e);r&&r[1]?t.setAttributeNS(ie,r[1],n):t.setAttribute(e,n)}function b(t,e,n){t.insertBefore(e,n.parentNode&&n)}function x(t,e){if(t)for(var n;n=fe.exec(t);)e(n[1].toLowerCase(),n[2]||n[3]||n[4])}function C(t,e,n){if(t){var r,i=e(t,n);if(i===!1)return;for(t=t.firstChild;t;)r=t.nextSibling,C(t,e,i),t=r}}function j(t,e){for(var n,r=t?t.length:0,i=0;i<r;++i)n=t[i],e(n,i)===!1&&i--;return t}function T(t,e){return~t.indexOf(e)}function k(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function O(t,e){return t.slice(0,e.length)===e}function E(t,e,n,r){return Object.defineProperty(t,e,N({value:n,enumerable:!1,writable:!1,configurable:!0},r)),t}function N(t){for(var e,n=arguments,r=1;r<n.length;++r)if(e=n[r])for(var i in e)c(t,i)&&(t[i]=e[i]);return t}function S(t,e,n){var r=this._parent,i=this._item;if(!i)for(;r&&!i;)i=r._item,r=r._parent;if(c(n,"currentTarget")&&(n.currentTarget=t),c(n,"target")&&(n.target=n.srcElement),c(n,"which")&&(n.which=n.charCode||n.keyCode),n.item=i,e.call(this,n),!n.preventUpdate){var o=at(this);o.isMounted&&o.update()}}function L(t,e,n,r){var i,o=S.bind(r,n,e);return n.addEventListener?(n[t]=null,i=t.replace(xe,""),n._riotEvents||(n._riotEvents={}),n._riotEvents[t]&&n.removeEventListener(i,n._riotEvents[t]),n._riotEvents[t]=o,void n.addEventListener(i,o,!1)):void(n[t]=o)}function P(t,e){var n,r=Jt(t.value,e);if(t.tag&&t.tagName===r)return void t.tag.update();if(t.tag){var i=t.value,o=t.tag._parent.tags;_(t.tag.root,Yt,r),ft(o,i,t.tag)}t.impl=Qt[r],n={root:t.dom,parent:e,hasImpl:!0,tagName:r},t.tag=ot(t.impl,n,t.dom.innerHTML,e),t.tagName=r,t.tag.mount(),t.tag.update(),e.on("unmount",function(){var e=t.tag.opts.dataIs,n=t.tag.parent.tags,r=t.tag._parent.tags;ft(n,e,t.tag),ft(r,e,t.tag),t.tag.unmount()})}function M(t){var e,n=t.dom,i=t.attr,a=/^(show|hide)$/.test(i),s=a?Jt(t.expr,N({},this,this.parent)):Jt(t.expr,this),u="riot-value"===i,c=t.root&&"VIRTUAL"===t.root.tagName,l=n&&(t.parent||n.parentNode);if(t.bool?s=!!s&&i:(o(s)||null===s)&&(s=""),t._riot_id){if(t.isMounted)t.update();else if(t.mount(),c){var f=document.createDocumentFragment();ht.call(t,f),t.root.parentElement.replaceChild(f,t.root)}}else{if(e=t.value,t.value=s,t.update)return void t.update();if(t.isRtag&&s)return P(t,this);if(e!==s&&(!u||n.value!==s)){if(!i)return s+="",void(l&&(t.parent=l,"TEXTAREA"===l.tagName?(l.value=s,he||(n.nodeValue=s)):n.nodeValue=s));if(t.isAttrRemoved&&s||(y(n,i),t.isAttrRemoved=!0),r(s))L(i,s,n,this);else if(a)"hide"===i&&(s=!s),n.style.display=s?"":"none";else if(u)n.value=s;else if(O(i,Xt)&&i!==Yt)i=i.slice(Xt.length),pe[i]&&(i=pe[i]),null!=s&&_(n,i,s);else{if("selected"===i&&l&&/^(SELECT|OPTGROUP)$/.test(l.tagName)&&s&&(l.value=n.value),t.bool&&(n[i]=s,!s))return;(0===s||s&&("undefined"==typeof s?"undefined":_typeof(s))!==ee)&&_(n,i,s)}}}}function A(t){j(t,M.bind(this))}function R(t,e,n,r){var i=r?Object.create(r):{};return i[t.key]=e,t.pos&&(i[t.pos]=n),i}function I(t,e,n,r){for(var i,o=e.length,a=t.length;o>a;)i=e[--o],e.splice(o,1),i.unmount(),ft(r.tags,n,i,!0)}function $(t){var e=this;j(Object.keys(this.tags),function(n){var r=e.tags[n];u(r)?j(r,function(e){it.apply(e,[n,t])}):it.apply(r,[n,t])})}function B(t,e,n){n?vt.apply(this,[t,e]):b(t,this.root,e.root)}function H(t,e,n){n?ht.apply(this,[t,e]):b(t,this.root,e.root)}function D(t,e){e?ht.call(this,t):t.appendChild(this.root)}function F(t,e,n){y(t,"each");var r,i=_typeof(w(t,"no-reorder"))!==te||y(t,"no-reorder"),o=ut(t),a=Qt[o]||{tmpl:g(t)},s=se.test(o),c=t.parentNode,l=h(),f=nt(t),p=w(t,"if"),v=[],m=[],_=!0,b=!Qt[o],x="VIRTUAL"===t.tagName;return n=Jt.loopKeys(n),n.isLoop=!0,p&&y(t,"if"),c.insertBefore(l,t),c.removeChild(t),n.update=function(){var c=Jt(n.val,e),h=d(),g=l.parentNode;u(c)?r=!1:(r=c||!1,c=r?Object.keys(c).map(function(t){return R(n,c[t],t)}):[]),p&&(c=c.filter(function(t,r){return n.key?!!Jt(p,R(n,t,r,e)):!!Jt(p,e)||!!Jt(p,t)})),j(c,function(u,l){var p=i&&("undefined"==typeof u?"undefined":_typeof(u))===ee&&!r,d=m.indexOf(u),y=~d&&p?d:l,w=v[y];if(u=!r&&n.key?R(n,u,l):u,!p&&!w||p&&!~d){var C=l===v.length;w=new et(a,{parent:e,isLoop:_,isAnonymous:b,root:s?g:t.cloneNode(),item:u},t.innerHTML),w.mount(),C?D.apply(w,[h||g,x]):H.apply(w,[g,v[l],x]),C||m.splice(l,0,u),v.splice(l,0,w),f&&lt(e.tags,o,w,!0),y=l}else w.update(u);y!==l&&p&&(T(c,m[l])&&B.apply(w,[g,v[l],x]),n.pos&&(w[n.pos]=l),v.splice(l,0,v.splice(y,1)[0]),m.splice(l,0,m.splice(y,1)[0]),!f&&w.tags&&$.call(w,l)),w._item=u,E(w,"_parent",e)}),I(c,v,o,e),m=c.slice(),g.insertBefore(h,l)},n.unmount=function(){j(v,function(t){t.unmount()})},n}function U(t,e,n){var r=this,i={parent:{children:e}};return C(t,function(e,i){var o=e.nodeType,a=i.parent,s=void 0,u=void 0,c=void 0;if(!n&&e===t)return{parent:a};if(3===o&&"STYLE"!==e.parentNode.tagName&&Jt.hasExpr(e.nodeValue)&&a.children.push({dom:e,expr:e.nodeValue}),1!==o)return i;if(s=w(e,"each"))return a.children.push(F(e,r,s)),!1;if(s=w(e,"if"))return a.children.push(Object.create(Ce).init(e,r,s)),!1;if((u=w(e,Yt))&&Jt.hasExpr(u))return a.children.push({isRtag:!0,expr:u,dom:e}),!1;if(c=nt(e),c&&(e!==t||n)){var l={root:e,parent:r,hasImpl:!0};return a.children.push(ot(c,l,e.innerHTML,r)),!1}return q.apply(r,[e,e.attributes,function(t,e){e&&a.children.push(e)}]),{parent:a}},i),{tree:i,root:t}}function q(t,e,r){var i=this;j(e,function(e){var o,a=e.name,s=n(a);~["ref","data-ref"].indexOf(a)?o=Object.create(je).init(t,a,e.value,i):Jt.hasExpr(e.value)&&(o={dom:t,expr:e.value,attr:e.name,bool:s}),r(e,o)})}function V(t,e,n){var r="o"===n[0],i=r?"select>":"table>";if(t.innerHTML="<"+i+e.trim()+"</"+i,i=t.firstChild,r)i.selectedIndex=-1;else{var o=Ne[n];o&&1===i.childElementCount&&(i=p(o,i))}return i}function z(t,e){if(!Te.test(t))return t;var n={};return e=e&&e.replace(Oe,function(t,e,r){return n[e]=n[e]||r,""}).trim(),t.replace(Ee,function(t,e,r){return n[e]||r||""}).replace(ke,function(t,n){return e||n||""})}function G(t,n,r){var i=t&&t.match(/^\s*<([-\w]+)/),o=i&&i[1].toLowerCase(),a=v(Le,r&&e(o));return t=z(t,n),Se.test(o)?a=V(a,t,o):m(a,t),a.stub=!0,a}function K(t,e){var n=this.name,r=this.tmpl,i=this.css,o=this.attrs,a=this.onCreate;return Qt[n]||(J(n,r,i,o,a),Qt[n].class=this.constructor),dt(t,n,e,this),i&&_e.inject(),this}function J(t,e,n,i,o){return r(i)&&(o=i,/^[\w\-]+\s?=/.test(n)?(i=n,n=""):i=""),n&&(r(n)?o=n:_e.add(n)),t=t.toLowerCase(),Qt[t]={name:t,tmpl:e,attrs:i,fn:o},t}function Z(t,e,n,r,i){n&&_e.add(n,t);var o=!!Qt[t];return Qt[t]={name:t,tmpl:e,attrs:r,fn:i},o&&Be.hotReloader&&Be.hotReloader(t),t}function Q(t,e,n){function r(t){if(t.tagName){var i=w(t,Yt);e&&i!==e&&(i=e,_(t,Yt,e));var a=dt(t,i||t.tagName.toLowerCase(),n);a&&o.push(a)}else t.length&&j(t,r)}var o=[];_e.inject(),i(e)&&(n=e,e=0);var s,u;if(a(t)?(t="*"===t?u=gt():t+gt(t.split(/, */)),s=t?f(t):[]):s=t,"*"===e){if(e=u||gt(),s.tagName)s=f(e,s);else{var c=[];j(s,function(t){return c.push(f(e,t))}),s=c}e=0}return r(s),o}function W(t,e,n){if(i(t))return void W("__unnamed_"+Ae++,t,!0);var a=n?Me:Pe;if(!e){if(o(a[t]))throw new Error("Unregistered mixin: "+t);return a[t]}a[t]=r(e)?N(e.prototype,a[t]||{})&&e:N(a[t]||{},e)}function X(){return j(Zt,function(t){return t.update()})}function Y(t){delete Qt[t]}function tt(t,e,n,r,i){if(!t||!n){var o=!n&&t?this:e||this;j(i,function(t){t.expr&&A.call(o,[t.expr]),r[k(t.name)]=t.expr?t.expr.value:t.value})}}function et(t,e,n){var i,o=N({},e.opts),s=e.parent,u=e.isLoop,c=e.isAnonymous,l=ct(e.item),f=[],p=[],d=[],h=e.root,v=e.tagName||ut(h),g="virtual"===v,m=[];Ft(this),t.name&&h._tag&&h._tag.unmount(!0),this.isMounted=!1,h.isLoop=u,E(this,"_internal",{isAnonymous:c,instAttrs:f,innerHTML:n,virts:[],tail:null,head:null}),E(this,"_riot_id",++Re),N(this,{root:h,opts:o},l),E(this,"parent",s||null),E(this,"tags",{}),E(this,"refs",{}),i=G(t.tmpl,n,u),E(this,"update",function(t){return r(this.shouldUpdate)&&!this.shouldUpdate(t)?this:(t=ct(t),u&&c&&rt.apply(this,[this.parent,m]),N(this,t),tt.apply(this,[u,s,c,o,f]),this.isMounted&&this.emit("update",t),A.call(this,d),this.isMounted&&this.emit("updated"),this)}.bind(this)),E(this,"mixin",function(){var t=this;return j(arguments,function(e){var n,i,o=[];e=a(e)?W(e):e,n=r(e)?new e:e;var s=Object.getPrototypeOf(n);do o=o.concat(Object.getOwnPropertyNames(i||n));while(i=Object.getPrototypeOf(i||n));j(o,function(e){if("init"!==e){var i=Object.getOwnPropertyDescriptor(n,e)||Object.getOwnPropertyDescriptor(s,e),o=i&&(i.get||i.set);!t.hasOwnProperty(e)&&o?Object.defineProperty(t,e,i):t[e]=r(n[e])?n[e].bind(t):n[e]}}),n.init&&n.init.bind(t)()}),this}.bind(this)),E(this,"mount",function(){var e=this;h._tag=this,q.apply(s,[h,h.attributes,function(t,n){!c&&je.isPrototypeOf(n)&&(n.tag=e),t.expr=n,f.push(t)}]),p=[],x(t.attrs,function(t,e){p.push({name:t,value:e})}),q.apply(this,[h,p,function(t,e){e?d.push(e):_(h,t.name,t.value)}]),this._parent&&c&&rt.apply(this,[this._parent,m]),tt.apply(this,[u,s,c,o,f]);var n=W(Wt);if(n)for(var r in n)n.hasOwnProperty(r)&&this.mixin(n[r]);if(t.fn&&t.fn.call(this,o),this.emit("before-mount"),U.apply(this,[i,d,!1]),this.update(l),u&&c)this.root=h=i.firstChild;else{for(;i.firstChild;)h.appendChild(i.firstChild);h.stub&&(h=s.root)}return E(this,"root",h),this.isMounted=!0,!this.parent||this.parent.isMounted?this.emit("mount"):this.parent.once("mount",function(){e.emit("mount")}),this}.bind(this)),E(this,"unmount",function(e){var n,r=this,i=this.root,o=i.parentNode,a=Zt.indexOf(this);if(this.emit("before-unmount"),x(t.attrs,function(t){O(t,Xt)&&(t=t.slice(Xt.length)),y(h,t)}),~a&&Zt.splice(a,1),o){if(s)n=at(s),g?Object.keys(this.tags).forEach(function(t){ft(n.tags,t,r.tags[t])}):ft(n.tags,v,this);else for(;i.firstChild;)i.removeChild(i.firstChild);e?y(o,Yt):o.removeChild(i)}return this._internal.virts&&j(this._internal.virts,function(t){t.parentNode&&t.parentNode.removeChild(t)}),st(d),j(f,function(t){return t.expr&&t.expr.unmount&&t.expr.unmount()}),this.emit("unmount"),this.off("*"),this.isMounted=!1,delete this.root._tag,this}.bind(this))}function nt(t){return t.tagName&&Qt[w(t,Yt)||w(t,Yt)||t.tagName.toLowerCase()]}function rt(t,e){var n=this;j(Object.keys(t),function(r){var i=!l(r)&&T(e,r);(o(n[r])||i)&&(i||e.push(r),n[r]=t[r])})}function it(t,e){var n,r=this.parent;r&&(n=r.tags[t],u(n)?n.splice(e,0,n.splice(n.indexOf(this),1)[0]):lt(r.tags,t,this))}function ot(t,e,n,r){var i=new et(t,e,n),o=e.tagName||ut(e.root,!0),a=at(r);return E(i,"parent",a),i._parent=r,lt(a.tags,o,i),a!==r&&lt(r.tags,o,i),e.root.innerHTML="",i}function at(t){for(var e=t;e._internal.isAnonymous&&e.parent;)e=e.parent;return e}function st(t){j(t,function(t){t instanceof et?t.unmount(!0):t.unmount&&t.unmount()})}function ut(t,e){var n=nt(t),r=!e&&w(t,Yt);return r&&!Jt.hasExpr(r)?r:n?n.name:t.tagName.toLowerCase()}function ct(t){if(!(t instanceof et||t&&_typeof(t.emit)===re))return t;var e={};for(var n in t)ce.test(n)||(e[n]=t[n]);return e}function lt(t,e,n,r){var i=t[e],o=u(i);i&&i===n||(!i&&r?t[e]=[n]:i?(!o||o&&!T(i,n))&&(o?i.push(n):t[e]=[i,n]):t[e]=n)}function ft(t,e,n,r){u(t[e])?(j(t[e],function(r,i){r===n&&t[e].splice(i,1)}),t[e].length?1!==t[e].length||r||(t[e]=t[e][0]):delete t[e]):delete t[e]}function pt(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function dt(t,e,n,r){var i=Qt[e],o=Qt[e].class,a=r||(o?Object.create(o.prototype):{}),s=t._innerHTML=t._innerHTML||t.innerHTML;t.innerHTML="";var u={root:t,opts:n};return n&&n.parent&&(u.parent=n.parent),i&&t&&et.apply(a,[i,u,s]),a&&a.mount&&(a.mount(!0),T(Zt,a)||Zt.push(a)),a}function ht(t,e){var n,r,i=h(),o=h(),a=d();for(this._internal.head=this.root.insertBefore(i,this.root.firstChild),this._internal.tail=this.root.appendChild(o),r=this._internal.head;r;)n=r.nextSibling,a.appendChild(r),this._internal.virts.push(r),r=n;e?t.insertBefore(a,e._internal.head):t.appendChild(a)}function vt(t,e){for(var n,r=this._internal.head,i=d();r;)if(n=r.nextSibling,i.appendChild(r),r=n,r===this._internal.tail){i.appendChild(r),t.insertBefore(i,e._internal.head);break}}function gt(t){if(!t){var e=Object.keys(Qt);return e+gt(e)}return t.filter(function(t){return!/[^-\w]/.test(t)}).reduce(function(t,e){var n=e.trim().toLowerCase();return t+(",["+Yt+'="'+n+'"]')},"")}function mt(t){return t.split(/[\/?#]/)}function yt(t,e){var n=e.replace(/\?/g,"\\?").replace(/\*/g,"([^/?#]+?)").replace(/\.\./,".*"),r=new RegExp("^"+n+"$"),i=t.match(r);if(i)return i.slice(1)}function wt(t,e){var n=void 0;return function(){clearTimeout(n),n=setTimeout(t,e)}}function _t(t){on=wt(kt,1),Ze[qe](ze,on),Ze[qe](Ge,on),Qe[qe](tn,Ot),t&&kt(!0)}function bt(){this.$=[],Ft(this),en.on("stop",this.s.bind(this)),en.on("emit",this.e.bind(this))}function xt(t){return t.replace(/^\/|\/$/,"")}function Ct(t){return"string"==typeof t}function jt(t){return(t||Xe.href).replace(De,"")}function Tt(t){return"#"===an[0]?(t||Xe.href||"").split(an)[1]||"":(Xe?jt(t):t||"").replace(an,"")}function kt(t){var e=0===fn;if(!(Je<=fn)&&(fn++,ln.push(function(){var e=Tt();(t||e!==sn)&&(en[Ke]("emit",e),sn=e)}),e)){for(var n=void 0;n=ln.shift();)n();fn=0}}function Ot(t){if(!(1!==t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var e=t.target;e&&"A"!==e.nodeName;)e=e.parentNode;!e||"A"!==e.nodeName||e[Ve]("download")||!e[Ve]("href")||e.target&&"_self"!==e.target||e.href.indexOf(Xe.href.match(De)[0])===-1||e.href!==Xe.href&&(e.href.split("#")[0]===Xe.href.split("#")[0]||"#"!==an[0]&&0!==jt(e.href).indexOf(an)||"#"===an[0]&&e.href.split(an)[0]!==Xe.href.split(an)[0]||!Et(Tt(e.href),e.title||Qe.title))||t.preventDefault()}}function Et(t,e,n){return We?(t=an+xt(t),e=e||Qe.title,n?We.replaceState(null,e,t):We.pushState(null,e,t),Qe.title=e,rn=!1,kt(),rn):en[Ke]("emit",Tt(t))}var Nt=function(){return Number(Math.floor(Date.now()/1e3))},St=function(t){var e=t.replace(/:/g,"-"),n=void 0,r=void 0;return e=e.replace(/ /g,"-"),n=e.split("-"),n.length<6&&(n[3]=n[4]=n[5]="00"),r=new Date(Date.UTC(n[0],n[1]-1,n[2],n[3]-8,n[4],n[5])),r.getTime()/1e3},Lt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Date(1e3*t),r=n.getFullYear(),i=n.getMonth()+1,o=n.getDate(),a=n.getHours(),s=n.getMinutes(),u=n.getSeconds(),c=e.sp||".";return i=i<10?"0"+i:i,o=o<10?"0"+o:o,a=a<10?"0"+a:a,s=s<10?"0"+s:s,u=u<10?"0"+u:u,1==e.showtime?r+c+i+c+o+" "+a+":"+s+":"+u:2==e.showtime?i+c+o+" "+a+":"+s:r+c+i+c+o},Pt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},Mt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")},At=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e={},n=decodeURIComponent(t).replace(/^\?/,"").split("&"),r=n.length,i=0,o=void 0;i<r;i++)n[i]&&(o=n[i].split("="),e[o[0]]=o[1]);return e},Rt=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Pt({payload:!1,formdata:!1,method:"GET",data:{},headers:{},cache:!1,type:"json",withCredentials:!1,showProgress:!1,done:function(){},fail:function(){},progress:function(){},complete:function(){}},n),t=void 0,i=0,o=[],a=e.split("/").pop().search(/\?/)!==-1;r.cache||(e+=(a?"&":"?")+"_="+Math.random(),a=!0),r.formdata?o=r.data:""!==Mt(r.data)&&o.push(Mt(r.data)),/^put$|^post$/i.test(r.method)&&!r.payload?r.headers["Content-type"]="application/x-www-form-urlencoded; charset=UTF-8":o.length>0&&(r.formdata||(e+=(a?"&":"?")+o)),t=new XMLHttpRequest,t.open(r.method,e,!0);for(var s in r.headers)t.setRequestHeader(s,r.headers[s]);if(t.withCredentials=r.withCredentials,r.showProgress){var u=function(t){t.lengthComputable&&(i=Math.round(100*t.loaded/t.total),r.progress.call(t.target,i))};t.upload&&t.upload.addEventListener("progress",u,!1),t.addEventListener("progress",u,!1)}return t.addEventListener("load",function(t){var e=void 0;200===t.target.status||304===t.target.status?(e=t.target.responseText,"json"===r.type&&(e=JSON.parse(e)),r.done.call(t.target,e)):r.fail.call(t.target,t.target.status)},{once:!0}),t.addEventListener("error",function(t){r.fail.call(t.tartget,t.target.status)},{once:!0}),t.addEventListener("loadend",function(){r.complete()},{once:!0}),t.done=function(e){return r.done=e,t},t.fail=function(e){return r.fail=e,t},t.progress=function(e){return r.progress=e,t},t.complete=function(e){return r.complete=e,t},t.send(o),t},It=function(t){return t.replace(/<.*?>/g,"")},$t={set:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2],r={},i=[],o=Pt({path:"/",domain:""},n);if(!t||/^(?:expires|max\-age|path|domain|secure)$/i.test(t))throw new Error("Cookie name is required and do not use cookie reserved keywords.");if(r[encodeURIComponent(t)]=encodeURIComponent(e),o.expires)throw new Error("Please use max-age to replace expires");for(var a in o)r[a]=o[a];for(var s in r)i.push(s+"="+r[s]);i=i.join("; "),document.cookie=i+";"},remove:function(t){this.set(t,"",{"max-age":0})},get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!0,n=!1,r=void 0;try{for(var i,o=document.cookie.split("; ")[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value,s=a.split("="),u=_slicedToArray(s,2),c=u[0],l=u[1];if(""!==t&&t===c)return decodeURIComponent(l)}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}}},Bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"script",e=arguments[1],n=arguments[2],r=document.createElement(t),i={script:"src",link:"href",img:"src"},o=Pt({position:"head",attrs:{},success:function(){},error:function(){}},n);if(!i.hasOwnProperty(t))throw new Error("File type:"+t+" is not support dynamic load.");if("undefined"==typeof e)throw new Error("Load file url is required.");if(Object.keys(o.attrs).length)for(var a in o.attrs)r[a]=o.attrs[a];return r[i[t]]=e,"link"===t&&(r.rel="stylesheet"),r.addEventListener("load",o.success,!1),r.addEventListener("error",o.error,!1),document[o.position].appendChild(r),r},Ht=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"script",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"head",n=arguments[2],r=0,i=document[e].getElementsByTagName(t);r<i.length;r++)i[r].rel===n&&i[r].parentNode.removeChild(i[r])},Dt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="_hc_json_"+t.split("/").pop().split(".")[0],r=Pt({force:!1,done:function(){},fail:function(){}},e);return"localStorage"in window&&$t.get(""+n)&&!r.force?setTimeout(function(){r.done.call(null,JSON.parse(window.localStorage.getItem(n)))},0):Rt(t).done(function(t){$t.set(n,"y"),window.localStorage&&window.localStorage.setItem(n,JSON.stringify(t)),r.done.call(null,t)}).fail(function(t){r.fail.call(null,t)}),r.done=function(t){return r.done=t,r},r.fail=function(t){return r.fail=t,r},r},Ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return t.__emited=t.__emited||{},Object.defineProperty(t,"on",{value:function(n,r){return"function"==typeof r&&((e[n]=e[n]||[]).push(r),t.__emited[n]&&r.apply(t,t.__emited[n])),t}}),Object.defineProperty(t,"once",{value:function(e,n){var r=function r(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];t.off(e,r),n.apply(t,o)};return t.on(e,r)}}),Object.defineProperty(t,"off",{value:function(n,r){if("*"!==n||r){if(r)for(var i in e[n])e[n][i]==r&&e[n].splice(i,1);else delete e[n];delete t.__emited[n]}else e={};return t}}),Object.defineProperty(t,"emit",{value:function(n){for(var r=(e[n]||[]).slice(0),i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var p=l.value;p.apply(t,o)}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}return e["*"]&&"*"!==n&&t.emit.apply(t,["*",n].concat(o)),t}}),Object.defineProperty(t,"trap",{value:function(n){for(var r=(e[n]||[]).slice(0),i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=!0,u=!1,c=void 0;try{for(var l,f=r[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var p=l.value;p.apply(t,o)}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}return t.__emited[n]=[n].concat(o),e["*"]&&"*"!==n&&t.emit.apply(t,["*",n].concat(o)),t}}),t},Ut=void 0,qt=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(_classCallCheck(this,t),0===n.length)throw new Error("Promise needs (resolve, reject) at least one function name.");return Ft(this),this._resolve=function(t){setTimeout(function(){e.emit("resolve",t),e._emited_value=t,e.off("reject")},0)},1===n.length?n.call(this,this._resolve):(this._reject=function(t){setTimeout(function(){e.emit("reject",t),e.off("resolve")},0)},n.call(this,this._resolve,this._reject)),this}return _createClass(t,[{key:"then",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=arguments[1];return this.once("resolve",function(n){try{if(t.__chain_value instanceof Ut)return void t.__chain_value.then(e);t.__chain_value=e.call(null,t.__chain_value||n)}catch(e){t.emit("reject",e)}}),"function"==typeof n?this.catch(n):(this._emited_value&&this.emit("resolve",this._emited_value),this)}},{key:"catch",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return this.once("reject",function(n){var r=void 0;try{if(t.__no_throw)return;r=e.call(null,n),t.__no_throw=!0,r&&t.emit("resolve",r)}catch(e){if(t.emit("reject",e),!t.__no_throw)throw e}}),this}}],[{key:"all",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return new t(function(t,r){var i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;c.then(function(r){n.push(r),n.length===e.length&&t(n)}).catch(function(t){r(t)})}}catch(t){o=!0,a=t}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}})}},{key:"resolve",value:function(e){return e instanceof Ut?e:new t(function(t){setTimeout(function(){t(e)},0)})}},{key:"reject",value:function(e){return new t(function(t,n){setTimeout(function(){n(e)},0)})}}]),t}();Ut=qt;var Vt,zt,Gt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"alias",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;t[u]&&0!==t[u].length&&n.push(t[u])}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.depend.apply(this,n)}},{key:"depend",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0,o=[],a=[],s=function e(r,s){i===n.length&&(o.length>0?s(o):r(a)),t.batch.apply(t,n[i]).then(function(t){a=a.concat(t),i++,e(r,s)}).catch(function(t){o=o.concat(t),i++,e(r,s)})};return new Ut(s)}},{key:"batch",value:function(){var t=this,e=[],n=[],r=[],i=[];this._loaded_files=this._loaded_files||[];for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];var u=!0,c=!1,l=void 0;try{for(var f,p=a[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var d=f.value,h=!1,v=!0,g=!1,m=void 0;try{for(var y,w=e[Symbol.iterator]();!(v=(y=w.next()).done);v=!0){var _=y.value;d.split("/").pop()===_.split("/").pop()&&(h=!0,n=n.concat(d))}}catch(t){g=!0,m=t}finally{try{!v&&w.return&&w.return()}finally{if(g)throw m}}h||(e=e.concat(d))}}catch(t){c=!0,l=t}finally{try{!u&&p.return&&p.return()}finally{if(c)throw l}}return new Ut(function(o,a){var s=function(){var n=!0,o=!1,a=void 0;try{for(var s,c=function(){var e=s.value,n=e.split("/").pop(),o=n.split(".").pop().split("?")[0],a={rel:e},c=t.types[o];return"js"===o&&(a.defer=!0),t._loaded_files.indexOf(e)!==-1?(u(i.push(e)),"continue"):void Bt(c,e,{attrs:a,success:function(){t._loaded_files.push(e),u(i.push(e))},error:function(){Ht(c,"head",e),u(r.push(e))}})},l=e[Symbol.iterator]();!(n=(s=l.next()).done);n=!0){c()}}catch(t){o=!0,a=t}finally{try{!n&&l.return&&l.return()}finally{if(o)throw a}}},u=function(){if(i.length===e.length)return o(i);if(i.length+r.length===e.length){var u=!1;for(var c in r)for(var l in n)n[l].split("/").pop()===r[c].split("/").pop()&&(u=!0,i=i.concat(n[l]),n.splice(l,1));if(u&&i.length===e.length){var f=!0,p=!1,d=void 0;try{for(var h,v=e[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var g=h.value;Ht(t.types[g.split(".").pop()],"head",g)}}catch(t){p=!0,d=t}finally{try{!f&&v.return&&v.return()}finally{if(p)throw d}}e=i,i=[],r=[],s()}else a(r)}};s()})}},{key:"types",get:function(){return{js:"script",css:"link"}}}]),t}(),Kt=function(t){function e(t){return t}function n(t,e){return e||(e=w),new RegExp(t.source.replace(/{/g,e[2]).replace(/}/g,e[3]),t.global?c:"")}function r(t){if(t===g)return m;var e=t.split(" ");if(2!==e.length||d.test(t))throw new Error('Unsupported brackets "'+t+'"');return e=e.concat(t.replace(h,"\\").split(" ")),e[4]=n(e[1].length>1?/{[\S\s]*?}/:m[4],e),e[5]=n(t.length>3?/\\({|})/g:m[5],e),e[6]=n(m[6],e),e[7]=RegExp("\\\\("+e[3]+")|([[({])|("+e[3]+")|"+p,c),e[8]=t,e}function i(t){return t instanceof RegExp?s(t):w[t]}function o(t){(t||(t=g))!==w[8]&&(w=r(t),s=t===g?e:n,w[9]=s(m[9])),y=t}function a(t){var e;t=t||{},e=t.brackets,Object.defineProperty(t,"brackets",{set:o,get:function(){return y},enumerable:!0}),u=t,o(e)}var s,u,c="g",l=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,f=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,p=f.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,d=RegExp("[\\x00-\\x1F<>a-zA-Z0-9'\",;\\\\]"),h=/(?=[[\]()*+?.^$|])/g,v={"(":RegExp("([()])|"+p,c),"[":RegExp("([[\\]])|"+p,c),"{":RegExp("([{}])|"+p,c)},g="{ }",m=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+p,c),g,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],y=t,w=[];return i.split=function(t,e,n){function r(t){e||a?c.push(t&&t.replace(n[5],"$1")):c.push(t)}function i(t,e,n){var r,i=v[e];for(i.lastIndex=n,n=1;(r=i.exec(t))&&(!r[1]||(r[1]===e?++n:--n)););return n?t.length:i.lastIndex}n||(n=w);var o,a,s,u,c=[],l=n[6];for(a=s=l.lastIndex=0;o=l.exec(t);){if(u=o.index,a){if(o[2]){l.lastIndex=i(t,o[2],l.lastIndex);continue}if(!o[3])continue}o[1]||(r(t.slice(s,u)),s=l.lastIndex,l=n[6+(a^=1)],l.lastIndex=s)}return t&&s<t.length&&r(t.slice(s)),c},i.hasExpr=function(t){return w[4].test(t)},i.loopKeys=function(t){var e=t.match(w[9]);return e?{key:e[1],pos:e[2],val:w[0]+e[3].trim()+w[1]}:{val:t.trim()}},i.array=function(t){return t?r(t):w},Object.defineProperty(i,"settings",{set:a,get:function(){return u}}),i.settings="undefined"!=typeof riot&&riot.settings||{},i.set=o,i.R_STRINGS=f,i.R_MLCOMMS=l,i.S_QBLOCKS=p,i}(),Jt=function(){function t(t,r){return t?(a[t]||(a[t]=n(t))).call(r,e):t}function e(e,n){e.riotData={tagName:n&&n.root&&n.root.tagName,_riot_id:n&&n._riot_id},t.errorHandler?t.errorHandler(e):"undefined"!=typeof console&&"function"==typeof console.error&&(e.riotData.tagName&&console.error("Riot template error thrown in the <%s> tag",e.riotData.tagName.toLowerCase()),console.error(e))}function n(t){var e=r(t);return"try{return "!==e.slice(0,11)&&(e="return "+e),new Function("E",e+";")}function r(t){var e,n=[],r=Kt.split(t.replace(l,'"'),1);if(r.length>2||r[0]){var o,a,s=[];for(o=a=0;o<r.length;++o)e=r[o],e&&(e=1&o?i(e,1,n):'"'+e.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(s[a++]=e);e=a<2?s[0]:"["+s.join(",")+'].join("")'}else e=i(r[1],0,n);return n[0]&&(e=e.replace(f,function(t,e){return n[e].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),e}function i(t,e,n){function r(e,n){var r,i=1,o=p[e];for(o.lastIndex=n.lastIndex;r=o.exec(t);)if(r[0]===e)++i;else if(!--i)break;n.lastIndex=i?t.length:o.lastIndex}if(t=t.replace(c,function(t,e){return t.length>2&&!e?s+(n.push(t)-1)+"~":t}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var i,a=[],l=0;t&&(i=t.match(u))&&!i.index;){var f,d,h=/,|([[{(])|$/g;for(t=RegExp.rightContext,f=i[2]?n[i[2]].slice(1,-1).trim().replace(/\s+/g," "):i[1];d=(i=h.exec(t))[1];)r(d,h);d=t.slice(0,i.index),t=RegExp.rightContext,a[l++]=o(d,1,f)}t=l?l>1?"["+a.join(",")+'].join(" ").trim()':a[0]:o(t,e)}return t}function o(t,e,n){var r;return t=t.replace(h,function(t,e,n,i,o){return n&&(i=r?0:i+t.length,"this"!==n&&"global"!==n&&"window"!==n?(t=e+'("'+n+d+n,i&&(r="."===(o=o[i])||"("===o||"["===o)):i&&(r=!v.test(o.slice(i)))),t}),r&&(t="try{return "+t+"}catch(e){E(e,this)}"),n?t=(r?"function(){"+t+"}.call(this)":"("+t+")")+'?"'+n+'":""':e&&(t="function(v){"+(r?t.replace("return ","v="):"v=("+t+")")+';return v||v===0?v:""}.call(this)'),t}var a={};t.hasExpr=Kt.hasExpr,t.loopKeys=Kt.loopKeys,
t.clearCache=function(){a={}},t.errorHandler=null;var s=String.fromCharCode(8279),u=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\u2057(\d+)~):/,c=RegExp(Kt.S_QBLOCKS,"g"),l=/\u2057/g,f=/\u2057(\d+)~/g,p={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},d='"in this?this:'+("object"!==("undefined"==typeof window?"undefined":_typeof(window))?"global":"window")+").",h=/[,{][\$\w]+(?=:)|(^ *|[^$\w\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,v=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return t.version=Kt.version="v3.0.1",t}(),Zt=[],Qt={},Wt="__global_mixin",Xt="riot-",Yt="data-is",te="string",ee="object",ne="undefined",re="function",ie="http://www.w3.org/1999/xlink",oe=/^xlink:(\w+)/,ae=("undefined"==typeof window?"undefined":_typeof(window))===ne?void 0:window,se=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,ue=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/,ce=/^(?:_(?:item|id|parent)|update|root|(?:un)?mount|mixin|is(?:Mounted|Loop)|tags|refs|parent|opts|emit|o(?:n|ff|ne))$/,le=/^(altGlyph|animate(?:Color)?|circle|clipPath|defs|ellipse|fe(?:Blend|ColorMatrix|ComponentTransfer|Composite|ConvolveMatrix|DiffuseLighting|DisplacementMap|Flood|GaussianBlur|Image|Merge|Morphology|Offset|SpecularLighting|Tile|Turbulence)|filter|font|foreignObject|g(?:lyph)?(?:Ref)?|image|line(?:arGradient)?|ma(?:rker|sk)|missing-glyph|path|pattern|poly(?:gon|line)|radialGradient|rect|stop|svg|switch|symbol|text(?:Path)?|tref|tspan|use)$/,fe=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g,pe={viewbox:"viewBox"},de=/^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/,he=0|(ae&&ae.document||{}).documentMode,ve=Object.freeze({isSVGTag:e,isBoolAttr:n,isFunction:r,isObject:i,isUndefined:o,isString:a,isBlank:s,isArray:u,isWritable:c,isReservedName:l}),ge=Object.freeze({$$:f,$:p,createFrag:d,createDOMPlaceholder:h,mkEl:v,getOuterHTML:g,setInnerHTML:m,remAttr:y,getAttr:w,setAttr:_,safeInsert:b,walkAttrs:x,walkNodes:C}),me={},ye=[],we=!1;ae&&(Vt=function(){var t=v("style");_(t,"type","text/css");var e=p("style[type=riot]");return e?(e.id&&(t.id=e.id),e.parentNode.replaceChild(t,e)):document.getElementsByTagName("head")[0].appendChild(t),t}(),zt=Vt.styleSheet);var _e={styleNode:Vt,add:function(t,e){e?me[e]=t:ye.push(t),we=!0},inject:function(){if(ae&&we){we=!1;var t=Object.keys(me).map(function(t){return me[t]}).concat(ye).join("\n");zt?zt.cssText=t:Vt.innerHTML=t}}},be=Object.freeze({each:j,contains:T,toCamel:k,startsWith:O,defineProperty:E,extend:N}),xe=/^on/,Ce={init:function(t,e,n){y(t,"if"),this.parentTag=e,this.expr=n,this.stub=document.createTextNode(""),this.pristine=t;var r=t.parentNode;return r.insertBefore(this.stub,t),r.removeChild(t),this},update:function(){var t=Jt(this.expr,this.parentTag);t&&!this.current?(this.current=this.pristine.cloneNode(!0),this.stub.parentNode.insertBefore(this.current,this.stub),this.expressions=[],U.apply(this.parentTag,[this.current,this.expressions,!0])):!t&&this.current&&(st(this.expressions),this.current._tag?this.current._tag.unmount():this.current.parentNode&&this.current.parentNode.removeChild(this.current),this.current=null,this.expressions=[]),t&&A.call(this.parentTag,this.expressions)},unmount:function(){st(this.expressions||[]),delete this.pristine,delete this.parentNode,delete this.stub}},je={init:function(t,e,n,r){return this.dom=t,this.attr=e,this.rawValue=n,this.parent=r,this.hasExp=Jt.hasExpr(n),this.firstRun=!0,this},update:function(){var t=this.rawValue;if(this.hasExp&&(t=Jt(this.rawValue,this.parent)),this.firstRun||t!==this.value){var e=this.parent&&at(this.parent),n=this.tag||this.dom;!s(this.value)&&e&&ft(e.refs,this.value,n),s(t)?y(this.dom,this.attr):(e&&lt(e.refs,t,n),_(this.dom,this.attr,t)),this.value=t,this.firstRun=!1}},unmount:function(){var t=this.tag||this.dom,e=this.parent&&at(this.parent);!s(this.value)&&e&&ft(e.refs,this.value,t),delete this.dom,delete this.parent}},Te=/<yield\b/i,ke=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>|>)/gi,Oe=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,Ee=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,Ne={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},Se=he&&he<10?se:ue,Le="div",Pe={},Me=Pe[Wt]={},Ae=0,Re=0,Ie=Object.freeze({getTag:nt,inheritFrom:rt,moveChildTag:it,initChildTag:ot,getImmediateCustomParentTag:at,unmountAll:st,getTagName:ut,cleanUpData:ct,arrayishAdd:lt,arrayishRemove:ft,isInStub:pt,mountTo:dt,makeVirtual:ht,moveVirtual:vt,selectTags:gt}),$e=Object.create(Kt.settings),Be={tmpl:Jt,brackets:Kt,styleManager:_e,vdom:Zt,styleNode:_e.styleNode,dom:ge,check:ve,misc:be,tags:Ie},He=Object.freeze({settings:$e,util:Be,observable:Ft,Tag:K,tag:J,tag2:Z,mount:Q,mixin:W,update:X,unregister:Y}),De=/^.+?\/\/+[^\/]+/,Fe="EventListener",Ue="remove"+Fe,qe="add"+Fe,Ve="hasAttribute",ze="popstate",Ge="hashchange",Ke="emit",Je=3,Ze="undefined"!=typeof window&&window,Qe="undefined"!=typeof document&&document,We=Ze&&history,Xe=Ze&&(We.location||Ze.location),Ye=bt.prototype,tn=Qe&&Qe.ontouchstart?"touchstart":"click",en=Ft(),nn=!1,rn=!1,on=void 0,an=void 0,sn=void 0,un=void 0,cn=void 0,ln=[],fn=0;Ye.m=function(t,e,n){!Ct(t)||e&&!Ct(e)?e?this.r(t,e):this.r("@",t):Et(t,e,n||!1)},Ye.s=function(){this.off("*"),this.$=[]},Ye.e=function(t){this.$.concat("@").some(function(e){var n=("@"===e?un:cn)(xt(t),xt(e));if("undefined"!=typeof n)return this[Ke].apply(null,[e].concat(n)),rn=!0},this)},Ye.r=function(t,e){"@"!==t&&(t="/"+xt(t),this.$.push(t)),this.on(t,e)};var pn=new bt,dn=pn.m.bind(pn);dn.create=function(){var t=new bt,e=t.m.bind(t);return e.stop=t.s.bind(t),e},dn.base=function(t){an=t||"#",sn=Tt()},dn.exec=function(){kt(!0)},dn.parser=function(t,e){t||e||(un=mt,cn=yt),t&&(un=t),e&&(cn=e)},dn.query=function(){var t={},e=Xe.href||sn;return e.replace(/[?&](.+?)=([^&]*)/g,function(e,n,r){t[n]=r}),t},dn.stop=function(){nn&&(Ze&&(Ze[Ue](ze,on),Ze[Ue](Ge,on),Qe[Ue](tn,Ot)),en[Ke]("stop"),nn=!1)},dn.start=function(t){nn||(Ze&&("complete"===document.readyState?_t(t):Ze[qe]("load",function(){setTimeout(function(){_t(t)},1)})),nn=!0)},dn.base(),dn.parser();var hn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _classCallCheck(this,t),this.instance||(window.riot=He,Ft(this),this.config=Pt({id:"app",lang:"cn",version:"1.0",env:"dev",staticBase:"./static/",routeBase:"#!",mountPage:"page",loginPage:"login",indexPage:"index",errorPage:"500",notFoundPage:"404",resource:[]},e),this.tagMounted={},this.Promise=Ut,this.emitter=Ft,this.route=dn,this.xhr=Rt,this.utils={cookie:$t,str2time:St,time2str:Lt,time:Nt,serialize:Mt,pureText:It},this.init(),this.instance=this),this.instance}return _createClass(t,[{key:"init",value:function(){var t=this,e=this.config;e.resource.push(this.config.env),Dt(""+e.staticBase+e.id+".json?v="+e.version,{force:"pro"!==e.env}).done(function(n){t.data=n,t.lang=n.lang&&n.lang[e.lang]||{},Gt.alias(t.data,e.resource).then(function(n){dn.base(e.routeBase),dn.parser(function(t){var e=t.split("?"),n=e[0].split("/"),r=e[1];return r&&n.push(At(r)),n}),t.on("route::change",function(n){var r=n[0]||e.indexPage,i=e.staticBase+"riot/"+e.id+"/"+r+".js?v="+e.version,o=e.id+"-"+r;t.route.params=n,t.route.path="",t.route.query={};for(var a in n)"object"===_typeof(n[a])?(t.route.query=n[a],t.route.params.splice(a,1)):t.route.path+=n[a]+"/";t.route.path=t.route.path.slice(0,-1),Gt.batch(i).then(function(){try{!function(){var n=He.mount(e.mountPage,o)[0],r=function e(n){for(var r in n.tags)t.tagMounted[r]=n.tags[r],e(n.tags[r])};t.tagMounted[o]=n,r(n)}()}catch(n){window.location.replace(e.routeBase+"/"+e.errorPage+"?message="+n.message),t.err(n)}}).catch(function(){window.location.replace(e.routeBase+"/"+e.notFoundPage)})}),dn(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.emit("route::change",n)}),dn.start(!0),He.mixin({app:t}),t.emit("init::done",n)}).catch(function(e){t.emit("init::fail",e)})})}},{key:"query",value:function(){dn(this.route.path+"?"+Mt(this.route.query))}},{key:"log",value:function(){var t;return"pro"!==this.config.dev?window.console&&(t=window.console).log.apply(t,arguments):null}},{key:"err",value:function(){var t;return window.console&&(t=window.console).error.apply(t,arguments)}},{key:"api",value:function(){}},{key:"addResource",value:function(t){var e=void 0;return this.data?(this.data[t]?e=t:this.data[t+"."+this.config.env]&&(e=t+"."+this.config.env),Gt.alias(this.data,[e])):Ut.reject()}},{key:"addResources",value:function(t){return Gt.depend.apply(Gt,this.data[t])}}]),t}(),vn=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"api",value:function t(e,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={dev:"dev.",test:"test.",pro:"www."}[this.config.env],a=void 0,t=this.emitter();this.__api=this.__api||[];for(var s in this.__api)if(this.__api[s]===n)return t.emit("fail",{code:"500-13",errmsg:"接口繁忙",url:n});return this.__api.push(n),i.trigger&&(a=i.trigger.innerText,i.trigger.innerText="处理中",i.trigger.disabled=!0),this.xhr("//"+o+"fp.sosho.cn/"+n,{payload:i.payload||!1,formdata:i.formdata||!1,showProgress:i.showProgress||!1,method:e,data:i.data||{},headers:i.headers||{},cache:i.cache||!1}).done(function(e){0==e.errno?t.emit("done",e.data||{}):(403==e.errno&&window.location.replace(r.config.routeBase+"admin-deny"),401==e.errno&&(window.location.replace(""+r.config.routeBase+r.config.lologinPage+"?ref="+location.href),r.utils.cookie.remove("user_name"),r.utils.cookie.remove("user_id"),r.utils.cookie.remove("role")),t.emit("error",{code:e.errno||"",errmsg:e.errmsg,url:n||""}))}).progress(function(e){t.emit("progress",e)}).fail(function(e){t.emit("fail",{code:e,errmsg:"",url:n})}).complete(function(){r.__api.splice(r.__api.indexOf(n),1),i.trigger&&setTimeout(function(){i.trigger.disabled=!1,i.trigger.innerText=a},500),t.emit("complete",n)}),t.on("fail",function(t){r.alert("接口错误:"+t.code+" "+t.errmsg+" "+t.url,"error")}),t.on("error",function(t){r.alert(t.errmsg,"error")}),t}},{key:"alert",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";clearTimeout(this.__timer),this.__timer=setTimeout(function(){e.emit("alert",t,n)},500)}},{key:"subText",value:function(t,e){return t.length>e?t.slice(0,e)+"...":t}},{key:"getNatureName",value:function(t){var e=void 0;return this.lang.admin.agreement["donor:nature:list"].forEach(function(n){n.key==t&&(e=n.name)}),e||""}},{key:"getProjectTypeList",value:function(t){var e=this;return this.data.projectTypeList?t(this.data.projectTypeList):void this.api("GET","system-setting/project-type/search").on("done",function(n){e.data.projectTypeList=n.items,t(e.data.projectTypeList)})}},{key:"getProjectType",value:function(t){var e=void 0;return this.getProjectTypeList(function(n){n.forEach(function(n){n.id==t&&(e=n.name)})}),e||"-"}},{key:"getProjectStatus",value:function(t){var e=void 0;return this.lang.admin.project["filter:status"].forEach(function(n){n.key==t&&(e=n.name)}),e||""}},{key:"validAll",value:function(t){var e=this,n=[];return t.forEach(function(t){n.push(new e.Promise(function(e,n){t.once("valid",function(){e()}).once("invalid",function(){n()}).emit("check")}))}),this.Promise.all(n)}}],[{key:"detectEnv",value:function(t){return t?t:/localhost|127\.0|192\.168/.test(window.location.href)?"dev":"pro"}}]),e}(hn);t.FP=vn,Object.defineProperty(t,"__esModule",{value:!0})});